function BrowserDetection(e,t,n,o){"use strict";var i=this,r=[{string:"ua",subString:"Edge",identity:"Edge"},{string:"ua",subString:"Edg",identity:"ChromiumEdge"},{string:"ua",subString:"Samsung",identity:"SamsungBrowser"},{string:"ua",subString:"Chrome",identity:"Chrome"},{string:"ua",subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:"ua",subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:"vendor",subString:"iCab",identity:"iCab"},{string:"vendor",subString:"KDE",identity:"Konqueror"},{string:"ua",subString:"Firefox",identity:"Firefox"},{string:"vendor",subString:"Camino",identity:"Camino"},{string:"ua",subString:"Netscape",identity:"Netscape"},{string:"ua",subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:"ua",subString:"Trident",identity:"Explorer",versionSearch:"rv"},{string:"ua",subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:"ua",subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],a=e||navigator.userAgent,s=t||navigator.vendor,l=n||navigator.platform,d=o||navigator.appVersion,c={};function u(e,t){return c.hasOwnProperty(e)||(c[e]=!!t()),c[e]}this.getString=function(e){switch(e){case"ua":return a;case"vendor":return s;case"platform":return l;default:return e}},this.searchString=function(e){var t,n,o;for(t=0;t<e.length;t++)if(n=this.getString(e[t].string),o=e[t].prop,this.versionSearchString=e[t].versionSearch||e[t].identity,n){if(-1!==n.indexOf(e[t].subString))return e[t].identity}else if(o)return e[t].identity},this.searchVersion=function(e){var t=e.indexOf(this.versionSearchString);if(-1!==t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},this.searchOSVersion=function(){var e,t="Intel Mac OS X ",n=a.indexOf(t);return-1===n&&(t="iPhone OS ",n=a.indexOf(t)),-1===n?[99999,0,0]:(e=a.substring(n+t.length,n+t.length+11).replace(/_/g,".").split("."),[parseInt(e[0],10)||99999,parseInt(e[1],10)||0,parseInt(e[2],10)||0])},this.browser=this.searchString(r)||"An unknown browser",this.version=this.searchVersion(a)||this.searchVersion(d)||"an unknown version",this.OS=this.searchString([{string:"platform",subString:"Win",identity:"Windows"},{string:"ua",subString:"iPhone",identity:"iOS"},{string:"ua",subString:"iPad",identity:"iOS"},{string:"ua",subString:"iPod",identity:"iOS"},{string:"ua",subString:"Android",identity:"Android"},{string:"platform",subString:"Mac",identity:"Mac"},{string:"platform",subString:"Linux",identity:"Linux"}])||"an unknown OS";try{this.OSVersion=this.searchOSVersion()}catch(e){this.OSVersion=[99999,0,0]}this.isIE=function(){return"Explorer"===this.browser},this.isIE10=function(){return this.isIE()&&10===this.version},this.isIE11=function(){return this.isIE()&&11===this.version},this.isChrome=function(){return"Chrome"===this.browser||this.isSamsungBrowser()||this.isChromiumEdge()},this.isAndroid=function(){return"Android"===this.OS},this.isAndroidChrome=function(){return this.isChrome()&&(this.isAndroid()||this.supportsTouchEvents())},this.isSamsungBrowser=function(){return"SamsungBrowser"===this.browser},this.isEdge=function(){return"Edge"===this.browser},this.isChromiumEdge=function(){return"ChromiumEdge"===this.browser},this.isFirefox=function(){return"Firefox"===this.browser},this.isSafari=function(){return"Safari"===this.browser},this.isMobileSafari=function(){return this.isSafari()&&this.isMobile()},this.isMac=function(){return"Mac"===this.OS},this.isIOS=function(){return"iOS"===this.OS},this.isWindows=function(){return"Windows"===this.OS},this.getVersion=function(){return this.version},this.isMobile=function(){return this.supportsTouchEvents()||this.isAndroid()||this.isIOS()},this.isDesktop=function(){return!this.isMobile()},this.supportsTouchEvents=function(){return void 0!==document.ontouchstart},this.getPlatform=function(){return navigator.platform},this.isMobileSafariOnIPhone=function(){return this.isMobileSafari()&&"iPhone"===this.getPlatform()},this.supportsPassiveEventListeners=function(){if(void 0!==i.passive_option_supported)return i.passive_option_supported;i.passive_option_supported=!1;try{var e=Object.defineProperty({},"passive",{get:function(){i.passive_option_supported=!0}});window.addEventListener("fake",null,e)}catch(e){}return i.passive_option_supported},i.supportsComplexCSSClipPath=function(){return u("complex_css_clip_path",(function(){var e=document.createElement("div");return e.style.clipPath='path("M 0 0 Z")',"path("===e.style.clipPath.substr(0,5)}))},i.supportsResizeObserver=function(){return u("resize_observer",(function(){return!!window.ResizeObserver}))},i.supportsFontAPI=function(){return u("font_api",(function(){return document.fonts&&window.FontFace}))},i.supportsImageDecoder=function(){return u("image_decoder",(function(){return window.ImageDecoder&&window.fetch&&window.Promise&&window.ReadableStream&&window.ReadableStream.prototype.tee}))}}var BrowserDetect=new BrowserDetection;function Logger(e,t){"use strict";var n=t.level||"debug",o=this;function i(n,o){var i,r=n;i=function(n){var o,i,r,a=new Date,s=printStackTrace()[5],l={};if(a.setUTCHours((24+a.getUTCHours()-a.getTimezoneOffset()/60)%24),o=a.toISOString().substr(11,12)+" | "+Util.fit_string_in_fixed_len_field(e,12,"..")+" | ",s&&(i=s.indexOf("@"),s=s.slice(0,i),o+=Util.fit_string_in_fixed_len_field(s,22,"")+" | "),t.header&&(l=t.header()),"object"==typeof n)for(r in n)n.hasOwnProperty(r)&&(l[r]=n[r]);else l.detail=n;return o+=JSON.stringify(l,(function(e,t){return Util.is_string(t)?Util.string_shorten(t,4096,"..."):t})),Util.string_shorten(o,8192,"...")}(o),window.console[n]||(r="log"),"debug"===r&&"Explorer"===browser.name&&browser.version<=10&&(r="log");try{window.console[r](i)}catch(e){window.console.log(i)}}function r(e,t){try{i(e,t)}catch(e){try{window.console.log(e)}catch(e){}}}switch(o.debug=o.info=o.warn=function(e){},n){case"debug":DEBUG&&(o.debug=function(e){r("debug",e)});case"info":o.info=function(e){r("info",e)};case"warn":o.warn=function(e){r("warn",e)}}o.error=function(e){r("error",e)}}"use strict";var Util={};function __randstr(e,t){var n,o,i,r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],a=window.crypto||window.msCrypto,s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-";for(o="",t&&(n=new window.Uint8Array(e),a.getRandomValues(n)),i=0;i<e;i+=1)o+=t?s[n[i]%s.length]:r[Math.floor(Math.random()*r.length)];return o}function __startswith(e,t){return e.substring(0,t.length)===t}function __endswith(e,t){return e.substring(e.length-t.length)===t}function __object_assign(e,t){var n;if("function"==typeof Object.assign)return Object.assign(e,t);for(var o in n=Object(e),t)t.hasOwnProperty(o)&&(n[o]=t[o]);return n}function assert(e,t){if(!e&&("string"!=typeof t&&(t=JSON.stringify(t)),window.reportAssert&&reportAssert("tc-assert",t),DEBUG))throw new Error(t)}function printStackTrace(e){var t;if(e)t=e.stack.split("\n");else try{throw new Error}catch(e){t=e.stack.split("\n")}return BrowserDetect.isIE()||BrowserDetect.isChrome()?t.slice(1).map((function(e){return e.replace(/^\s*at\s+(.+)\s+\((.+)\)$/gm,"$1@$2").replace(/^\s*at\s+(.*)$/gm,"{anonymous}@$1")})):t}function ParsedURL(e){var t,n,o,i=this;i.protocol="",i.hostname="",i.port="",i.pathname="",i.search="",i.hash="",i.email=!1,i.applink=!1,i.host=function(){return i.hostname?i.hostname+(i.port?":"+i.port:""):""},i.origin=function(){var e=i.host();return e?i.email?"":i.protocol+"//"+e:i.applink?i.protocol:""},i.defrag=function(){var e=i.origin();return(i.email||i.applink)&&""===e&&(e=i.protocol+"/"),e+i.pathname+i.search},i.href=function(){return i.defrag()+i.hash},i.hasHash=function(){return i.hash||"#"===i.defrag().slice(-1)},i.getParam=function(e){return Util.getParamFromSearch(i.search,e)},e&&(BrowserDetect.isIE()&&(__startswith(e,"/")?e=window.location.origin+e:(__startswith(e,"0/")||__startswith(e,"1/"))&&(e="https://"+e)),(t=document.createElement("a")).href=e,i.protocol=t.protocol,i.applink=!("ws:"===i.protocol||"wss:"===i.protocol||"http:"===i.protocol||"https:"===i.protocol),t.port&&("80"!==t.port||"http:"!==i.protocol&&"ws:"!==i.protocol)&&("443"!==t.port||"https:"!==i.protocol&&"wss:"!==i.protocol)?i.port=t.port:i.port="","0.0.0.0"===t.hostname||"0.0.0.1"===t.hostname||__startswith(e,"0/")||__startswith(e,"1/")?(n=__startswith(e,"0/")||__startswith(e,"1/")?0:i.protocol.length+1,-1===(o=e.indexOf("?"))&&(o=e.indexOf("#")),-1===o&&(o=e.length),i.email=!0,i.hostname="",i.pathname=e.slice(n,o)):(i.email=!1,i.hostname=t.hostname,i.pathname=t.pathname),i.applink||""!==i.pathname&&0===i.pathname.indexOf("/")||(i.pathname="/"+i.pathname),i.search=t.search,i.search||-1===(n=e.indexOf("?"))||(-1===(o=e.indexOf("#"))&&(o=e.length),n<o&&(i.search="?")),i.hash=t.hash,!i.hash&&__endswith(t.href,"#")&&(i.hash="#"))}function allowNavigateToURL(e){var t,n;if(__startswith(e=e.toLowerCase().trim(),"/"))return!0;if(__startswith(e,"data:")||__startswith(e,"blob:")||__startswith(e,"javascript:"))return!1;if(__startswith(e,"http:")||__startswith(e,"https:"))return!0;if(safeview.pairing_dict&&safeview.pairing_dict.client_caps&&(t=safeview.pairing_dict.client_caps.applicationLinks))for(n=0;n<t.length;n+=1)if(-1!==t[n].indexOf(":")&&__startswith(e,t[n]))return!0;return!1}function suppressReferrerIfRequired(e,t){var n,o;if(e===window){if(TPROXY_ENABLED)n="strict-origin-when-cross-origin";else{if(__startswith(t,window.location.origin))return;n="no-referrer"}(o=document.createElement("meta")).setAttribute("name","referrer"),o.setAttribute("content",n),document.head.appendChild(o)}}"function"!=typeof Number.isFinite&&(Number.isFinite=function(e){return"number"==typeof e&&isFinite(e)}),Function.prototype.curry=function(){var e=this,t=Array.prototype.slice.call(arguments);return function(){return e.apply(this,t.concat(Array.prototype.slice.call(arguments)))}},Util.addTrackingLabel=function(e){var t=new ParsedURL(e);return assert(-1===t.search.indexOf("xid=")),t.search+=(t.search?"&":"?")+"xid="+__randstr(16),t.href()},Util.origin_of=function(e){return new ParsedURL(e).origin()},Util.parseSpecialUrlParts=function(e,t){var n,o,i,r,a,s=new ParsedURL(e),l=!1,d="",c="readonly",u="readonly/",m="mpa/",p="_sv_p_id";return __startswith(e,u)?(l=!0,s=new ParsedURL(e=e.substring(u.length))):__startswith(e,m)?((n=(e=e.substring(m.length)).indexOf("/"))>0&&(d=e.substring(0,n),e=e.substring(n+1)),s=new ParsedURL(e)):s.hostname===c?(l=!0,s=new ParsedURL(s.protocol+"/"+s.pathname+s.search+s.hash)):"mpa"===s.hostname&&((n=s.pathname.indexOf("/",1))>0&&(d=s.pathname.substring(1,n),s.pathname=s.pathname.substring(n)),s=new ParsedURL(s.protocol+"/"+s.pathname+s.search+s.hash)),t&&__startswith(s.search,"?__SV_SURROGATE_NODE=")&&2===(i=(o=s.search.substring(1).split("&"))[0].split("=")).length&&(r=i[1],s.search=o.length>=2?"?"+o.slice(1).join("&"):""),(a=s.getParam(p))&&(s.search=Util.removeParamFromSearch(s.search,p,a)||""),{mpa_id:d,ro:l,url:s.href(),pair_node:r}},Util.parseConfig=function(){var e,t,n=document.getElementsByTagName("safeview-info")[0],o=n.getAttribute("session-info"),i=Util.b64Decode(o),r=JSON.parse(i);for(e in r.hasOwnProperty("DEBUG")||(window.DEBUG=!1),r)if(r.hasOwnProperty(e)){if(t=r[e],("TC_API_VERSION"===e||"TC_BUNDLED"===e)&&window.hasOwnProperty(e))continue;window[e]=t}window.hasOwnProperty("TC_API_VERSION")||(window.TC_API_VERSION="0"),window.hasOwnProperty("TC_BUNDLED")||(window.TC_BUNDLED=!0),window.hasOwnProperty("BUILD_ID")||(window.BUILD_ID=n.getAttribute("build")),r.hasOwnProperty("INSPECT_DOMAIN")||(window.INSPECT_DOMAIN=window.CLUSTER_DOMAIN)},Util.parseURL=function(e){var t=document.createElement("a");return t.href=e,t},Util.windowOpen=function(e,t,n){return e&&!allowNavigateToURL(e)?null:void 0!==e?void 0!==t?void 0!==n?window.open(e,t,n):window.open(e,t):window.open(e):window.open()},Util.locationSetHref=function(e,t){allowNavigateToURL(t)&&(suppressReferrerIfRequired(e,t),e.location.href=t)},Util.locationReplace=function(e,t){return allowNavigateToURL(t)?(suppressReferrerIfRequired(e,t),e.location.replace(t)):null},Util.locationAssign=function(e,t){return allowNavigateToURL(t)?(suppressReferrerIfRequired(e,t),e.location.assign(t)):null},Util.locationSet=function(e,t){allowNavigateToURL(t)&&(suppressReferrerIfRequired(e,t),e.location=t)},Util.hashCode=function(e){var t,n=0;if(!e||0===e.length)return n;for(t=0;t<e.length;t+=1)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},Util.isIpAddress=function(e){return 0===e.search(/^(\d{1,3}\.){3}\d{1,3}$/)},Util.getScrollbarThickness=function(){function e(e,t){var n,o,i=document.createElement("div"),r=document.createElement("div");return i.style.visibility="hidden",i.style[e]="100px",document.body.appendChild(i),n=i[t],i.style.overflow="scroll",r.style[e]="100%",i.appendChild(r),o=r[t],i.parentNode.removeChild(i),n-o}return Util.cached_thickness||(Util.cached_thickness=[e("width","offsetWidth"),e("height","offsetHeight")]),Util.cached_thickness},Util.getDeviceScaleFactor=function(){var e=window.devicePixelRatio||1;return e-Math.floor(e)<.1?e:Math.ceil(e)},Util.getScreenOrientationType=function(){if(void 0===window.orientation)return"portrait";switch(window.orientation){case 0:case 180:return"portrait";case 90:case-90:return"landscape";default:return assert(0),"portrait"}},Util.getScreenOrientationAngle=function(){return"number"==typeof window.orientation?window.orientation:0},Util.getInnerWidth=function(){return window.innerWidth},Util.getInnerHeight=function(){return window.innerHeight},Util.getPortraitScreenSize=function(){var e=window.screen.width,t=window.screen.height;return(BrowserDetect.isIE()||BrowserDetect.isEdge())&&(window.innerWidth&&window.innerWidth>e&&(e=window.innerWidth),window.innerHeight&&window.innerHeight>t&&(t=window.innerHeight)),"portrait"===Util.getScreenOrientationType()||BrowserDetect.isMobileSafari()&&e<t?{width:e,height:t}:{width:t,height:e}},Util.getVisualViewport=function(){return window.visualViewport},Util.usesOverlayScrollbars=function(){var e=Util.getScrollbarThickness();return 0===e[0]&&0===e[1]},Util.getDeviceMetrics=function(){return{screen_size:Util.getPortraitScreenSize(),screen_orientation_type:Util.getScreenOrientationType(),screen_orientation_angle:Util.getScreenOrientationAngle(),device_scale_factor:window.debug_dsf||Util.getDeviceScaleFactor(),scrollbar_thickness:Util.getScrollbarThickness(),uses_overlay_scrollbars:Util.usesOverlayScrollbars(),enable_touch_events:void 0!==document.ontouchstart,max_touch_points:void 0!==navigator.maxTouchPoints?navigator.maxTouchPoints:2,mobile:BrowserDetect.isMobile()}},Util.getDoctypeDecl=function(e){var t,n=e.document.doctype;return n?(t="<!DOCTYPE "+n.name,n.publicId?(t+=' PUBLIC "'+n.publicId+'"',n.systemId&&(t+=' "'+n.systemId+'"')):n.systemId&&(t+=' SYSTEM "'+n.systemId+'"'),t+=">"):t="",t},Util.persistentPolicy=function(){var e;try{e=window.history.state||{}}catch(t){e={}}return"object"!=typeof e.persistent_policy&&(e.persistent_policy={}),e.persistent_policy||{}},Util.setUrlHint=function(e,t){safeview.qs_hint={key:e,value:t}},Util.getUrlHint=function(e){if(window.TPROXY_ENABLED)return e&&e.hint_key&&e.hint?{key:e.hint_key,value:e.hint}:safeview?safeview.qs_hint:void 0},Util.mpa_id_from_url=function(e){var t=e.split("/",5);return 5!==t.length||"mpa"!==t[3]?"":t[4]},Util.removePrefix=function(e){var t,n=["readonly/","mpa/"];for(t=0;t<n.length;t+=1)0===e.indexOf(n[t])&&(e=e.slice(n[t].length),"mpa/"===n[t]&&e.indexOf("/")>0&&(e=e.slice(e.indexOf("/")+1)));return e},Util.getRawPageUrl=function(e){var t,n;return e=e||location.href,window.TPROXY_ENABLED?e:(assert(2===(t=new RegExp(".+?://.+?/(.+)").exec(e)).length),n=t[1],new RegExp("(ftp|https?|ext)://","i").test(n)||(n="http://"+n),n)},Util.isAboutBlankUrl=function(){var e=Util.getRawPageUrl();return!!__startswith(e,"http://__about_~_blank__")||__endswith(new ParsedURL(e).pathname,"/__about_~_blank__")},Util.isMPAPortalUrl=function(){return __endswith(Util.getRawPageUrl(),"https://portal/")},Util.getPageUrl=function(){var e=Util.removePrefix(Util.getRawPageUrl());return Util.isAboutBlankUrl()&&(e="about:blank"),e},Util.getLanguage=function(){return navigator.userAgent.indexOf("MSIE 10.0")>=0?window.navigator.browserLanguage:window.navigator.language},Util.getLanguages=function(){return window.navigator.languages?window.navigator.languages.join():""},Util.b64_chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Util.b64Decode=function(e,t){var n,o,i,r,a,s,l="",d=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)n=Util.b64_chars.indexOf(e.charAt(d++))<<2|(r=Util.b64_chars.indexOf(e.charAt(d++)))>>4,o=(15&r)<<4|(a=Util.b64_chars.indexOf(e.charAt(d++)))>>2,i=(3&a)<<6|(s=Util.b64_chars.indexOf(e.charAt(d++))),l+=String.fromCharCode(n),64!==a&&(l+=String.fromCharCode(o)),64!==s&&(l+=String.fromCharCode(i));return t||(l=Util.utf8Decode(l)),l},Util.utf8Decode=function(e){for(var t,n,o,i="",r=0;r<e.length;)(t=e.charCodeAt(r))<128?(i+=String.fromCharCode(t),r++):t>191&&t<224?(n=e.charCodeAt(r+1),i+=String.fromCharCode((31&t)<<6|63&n),r+=2):(n=e.charCodeAt(r+1),o=e.charCodeAt(r+2),i+=String.fromCharCode((15&t)<<12|(63&n)<<6|63&o),r+=3);return i},Util.getFramingStatus=function(){if(window.top===window)return 0;try{if(window.parent.location.host===window.location.host)return 2}catch(e){}return 1},Util.getParamFromSearch=function(e,t,n){var o,i,r=e.substring(1).split("&");for(o=0;o<r.length;o+=1)if(r[o].split("=")[0]===t)return i=r[o].slice(r[o].indexOf("=")+1),n||(i=decodeURIComponent(i)),i;return null},Util.getParam=function(e,t){return Util.getParamFromSearch(window.location.search,e,t)},Util.appendParam=function(e,t){var n=document.location.search;return n+=(n?"&":"?")+e+"="+t,document.location.protocol+"//"+document.location.hostname+document.location.pathname+n+document.location.hash},Util.removeParamFromSearch=function(e,t,n){var o,i,r="";if(-1!==(i=(o=e.substring(1).split("&")).indexOf(t+"="+n)))return o.splice(i,1),o.length&&(r="?"+o.join("&")),r},Util.removeParam=function(e,t){var n,o=Util.removeParamFromSearch(document.location.search,e,t);if(void 0!==o){n=document.location.protocol+"//"+document.location.hostname+document.location.pathname+o+document.location.hash;try{window.history.state&&window.history.state.url&&(window.history.state.url=n),window.history.replaceState(window.history.state,"",n)}catch(e){}}},Util.is_in_iframe=function(){try{return window.self!==window.top}catch(e){return!0}},Util.isFrameBuster=function(){var e=window.FRAMEBUST;return e&&e.enabled&&window.top!==window.self&&0===window.innerWidth&&0===window.innerHeight&&-1!==e.domains.indexOf(window.location.hostname)},Util.simpleExtend=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Util.xmlHttpRequest=function(){this.timeout=0,this.withCredentials=!1,this.responseType="",this._headers={},this._abort=!1,this._request=null,this._request_id=null,this.onreadystatechange=this.onabort=this.ontimeout=this.onload=this.onerror=function(){},this.response=null,this.status=null,this.responseText="",this.readyState=0},Util.xmlHttpRequest.prototype.open=function(e,t,n){Util.areAuthTokensInUse()&&t.startsWith("https://")?(this._request=[e,t],this.readyState=1):(this._request=new XMLHttpRequest,void 0===n&&(n=!0),this._request.open(e,t,n))},Util.xmlHttpRequest.prototype.setRequestHeader=function(e,t){this._headers[e]=t},Util.xmlHttpRequest.prototype.getAllResponseHeaders=function(){return this._request instanceof XMLHttpRequest?this._request.getAllResponseHeaders():{}},Util.xmlHttpRequest.prototype.send=function(e){var t,n,o=this;if(this._request instanceof XMLHttpRequest){for(n in 0!==this.timeout&&(this._request.timeout=this.timeout),this._request.withCredentials=this.withCredentials,this._request.responseType=this.responseType,this._headers)this._headers.hasOwnProperty(n)&&this._request.setRequestHeader(n,this._headers[n]);t=function(){o.readyState=o._request.readyState,o.status=o._request.status,o.response=o._request.response,""!==o.responseType&&"text"!==o.responseType||(o.responseText=o._request.responseText)},this._request.onload=function(e){t(),o.onload(e)},this._request.onabort=function(e){t(),o.onabort(e)},this._request.onerror=function(e){t(),o.onerror(e)},this._request.ontimeout=function(e){t(),o.ontimeout(e)},this._request.onreadystatechange=function(e){t(),o.onreadystatechange(e)},this._request.send(e)}else this._request_id=Math.random(),this.readyState=2,safeview.cof.call(["xhrRequest",this._request[1],e,this.timeout,this._request[0],this.responseType,this._headers,this._request_id],(function(e){o.readyState=4,null===e?o._abort?o.onabort(o):o.onerror(o):408===e.status?o.ontimeout(o):(o.status=e.status,o.response=e.response,"text"===o.responseType&&(o.responseText=o.response),o.onload(o)),o.onreadystatechange(o)}))},Util.xmlHttpRequest.prototype.abort=function(){this._request instanceof XMLHttpRequest?this._request.abort():(this._abort=!0,safeview.cof.call(["xhrRequestAbort",this._request_id]))},Util.xhrRequest=function(e,t,n,o,i){var r=new Util.xmlHttpRequest;r.open("POST",e),r.timeout=i||safeview.perf.xhr_timeout_ms,r.withCredentials=!0,n&&(r.onload=function(t){200===r.status?n(JSON.parse(r.response)):o&&o(r,t,e)}),o&&(r.onerror=function(t){o(r,t,e)},r.ontimeout=function(t){o(r,t,e)}),r.send(JSON.stringify(t))},Util.setAuthTokensInUse=function(){Util.__auth_tokens=!0},Util.areAuthTokensInUse=function(){return!!Util.__auth_tokens},Util.isMseSupported=function(){return!BrowserDetect.isMobileSafariOnIPhone()&&(window.MediaSource=window.MediaSource||window.WebKitMediaSource,!!window.MediaSource)},Util.getUnsupportedMediaFormats=function(){var e,t,n=[{mime_types:["video/mp2t"],codecs:["avc1.64001F","mp4a.66","mp4a.40.2","mp3"]}],o=document.createElement("video"),i=null;function r(e,t,n){var o,i,r,a;for(o=0;o<t.length;o++)for(i=0;i<t[o].mime_types.length;i++){if(a=[],e(t[o].mime_types[i])){for(r=0;r<t[o].codecs.length;r++)e(t[o].mime_types[i]+';codecs="'+t[o].codecs[r]+'"')||a.push(t[o].codecs[r]);if(0===r)continue}else a=t[o].codecs;a.length===t[o].codecs.length?n.push(t[o].mime_types[i]):a.length&&n.push(t[o].mime_types[i]+';codecs="'+a.join(",")+'"')}}if(o.canPlayType&&r((function(e){return o.canPlayType(e)}),[{mime_types:["audio/wav","audio/x-wav"],codecs:["1"]},{mime_types:["audio/webm"],codecs:["opus","vorbis"]},{mime_types:["video/webm"],codecs:["opus","vorbis","vp8","vp9","av01.0.08M.08"]},{mime_types:["audio/ogg"],codecs:["flac","opus","vorbis"]},{mime_types:["video/ogg","application/ogg"],codecs:["vp8","flac","opus","vorbis","theora"]},{mime_types:["audio/flac","audio/mp3","audio/x-mp3","audio/aac"],codecs:[]},{mime_types:["audio/mp4"],codecs:["flac","mp3","opus","mp4a.66","mp4a.40.2","mp4a.40.42"]},{mime_types:["audio/mpeg"],codecs:["mp3"]},{mime_types:["video/mp4"],codecs:["vp09.00.10.08","avc1.64001F","av01.0.08M.08","flac","mp3","opus","mp4a.66","mp4a.40.2","mp4a.40.42","hev1.1.0.L90.B0","hev1.2.0.L90.B0","hev1.3.0.L90.B0","hev1.4.0.L90.B0","hev1.5.0.L90.B0","hev1.6.0.L90.B0","hev1.7.0.L90.B0","hev1.8.0.L90.B0","hev1.9.0.L90.B0","hev1.10.0.L90.B0","hev1.11.0.L90.B0"]},{mime_types:["audio/x-m4a"],codecs:["mp4a.66","mp4a.40.2","mp4a.40.42"]},{mime_types:["video/x-m4v","video/3gpp"],codecs:["avc1.64001F","mp4a.66","mp4a.40.2","mp4a.40.42"]},{mime_types:["application/x-mpegurl","application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl"],codecs:["avc1.64001F","mp3","mp4a.40.2"]}],i=[]),void 0!==window.MediaSource)null===i&&(i=[]),r((function(e){return MediaSource.isTypeSupported(e)}),n,i);else if(null!==i)for(e=0;e<n.length;++e)for(t=0;t<n[e].mime_types.length;t++)i.push(n[e].mime_types[t]);return window.SourceBuffer&&window.SourceBuffer.prototype.changeType||i.push("mse_change_type"),i},Util.clientHintsSupported=function(){return void 0!==window.navigator&&void 0!==window.navigator.userAgentData},Util.getClientHints=function(e){if(Util.clientHintsSupported()){const t=["architecture","bitness","brands","formFactors","fullVersionList","mobile","model","platform","platformVersion","uaFullVersion","wow64"];navigator.userAgentData.getHighEntropyValues(t).then(e).catch((function(){e(null)}))}else e(null)},Util.isPermittedURL=function(e){return __startswith(e,"https:")||__startswith(e,"data:")},Util.COFPath=function(){var e="/safeview-template/cof_frame.html?a="+TC_API_VERSION;return!1!==window.TC_BUNDLED&&(e+="&v="+BUILD_ID),e};var ONE_LEVEL_TLDS=["com","org","int","net","edu","gov","mil"];function argumentsToArray(e){return Array.prototype.slice.call(e).slice(0)}function Countdown(e,t,n,o){var i=null,r=null,a=this;function s(){t(safeview.localization.get("ID_TC_RECONNECT_ERROR")),setTimeout((function(){a.restart()}),2e3)}function l(){var e=r/1e3;assert(e>=0),t(safeview.localization.get("ID_TC_RELOADING",e))}function d(){i&&(clearInterval(i),i=null)}function c(){var e;assert(r>=1e3),r-=1e3,l(),0===r&&(d(),e=safeview.url_builder.buildServiceURL("/safeview-director/traffic_cop"),safeview.serverCall({url:e}).done((function(t){JSON.stringify(t),reportClientEvent("tc-service-check-done",{action:t,request_url:e}),"go"===t?n():s()})).fail((function(t,n){reportClientEvent("tc-service-check-failed",{textStatus:n,request_url:e}),s()})))}this.restart=function(){d(),r=e,l(),i=setInterval(c,1e3)},this.stop=d}Util.input_text_types={text:1,password:1,search:1,email:1,url:1,tel:1,number:1},Util.input_text_types_strict=["text","email","password","search","tel","url"],Util.date_time_input_types={date:"yyyy-MM-dd",time:"hh:mm",month:"yyyy-MM",week:"yyyy-Www","datetime-local":"yyyy-MM-ddThh:mm"},"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return 0===this.indexOf(e)}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e){return this.substring(this.length-e.length)===e}),"function"!=typeof Math.sign&&(Math.sign=function(e){return 0===e?0:e<0?-1:1}),"number"!=typeof Number.MAX_SAFE_INTEGER&&(Number.MAX_SAFE_INTEGER=Math.pow(2,53)-1,Number.MIN_SAFE_INTEGER=-Number.MAX_SAFE_INTEGER),Util.show_message_bar=function(e){var t,n,o=document.getElementById("__safly_message_bar");safeview.pairing_dict&&safeview.pairing_dict.client_caps&&safeview.pairing_dict.client_caps.enable_reconnect_banner&&(o||((o=document.createElement("div")).id="__safly_message_bar",o.style.cursor="pointer",o.style.display="none",o.style.position="fixed",o.style.top=0,o.style.left="27%",o.style.right="27%",o.style.margin="auto",o.style.padding="3px",o.style.width="35%",o.style.background="#fc0",o.style.textAlign="center",o.style.font="12px arial, sans-serif",o.style.opacity="0.9",o.style.zIndex="100000000000",o.style.borderBottomLeftRadius="5px",o.style.borderBottomRightRadius="5px",o.style.verticalAlign="middle",(t=document.body)||((n=document.getElementsByTagName("html")[0])||(n=document.createElement("html"),document.appendChild(n)),t=document.createElement("body"),n.appendChild(t),assert(document.body)),t.appendChild(o)),o.innerText=e,o.style.display="block")},Util.hide_message_bar=function(){var e=document.getElementById("__safly_message_bar");e&&(e.style.display="none")},Util.conf_default=function(e,t,n,o,i,r,a,s){var l,d;l=function(t){return{arr:1,array:1}.hasOwnProperty(r)&&void 0!==t?e[o][t]:e[o]},d=function(t,n){!{boolean:1,bool:1}.hasOwnProperty(r)?!{integer:1,int:1}.hasOwnProperty(r)?"func"===r&&(t||(t=function(){})):t=parseInt(t,10):t=!(!t||{0:1,no:1,false:1}.hasOwnProperty(t)),void 0!==n?e[o][n]=t:e[o]=t},t[o+"_description"]=s,void 0===t["get_"+o]&&(t["get_"+o]=l),void 0===t["set_"+o]&&(t["set_"+o]=function(t,n){if({RO:1,ro:1}.hasOwnProperty(i))throw new Error(o+" is read-only");if({WO:1,wo:1}.hasOwnProperty(i)&&void 0!==e[o])throw new Error(o+" can only be set once");d(t,n)}),void 0!==n[o]?a=n[o]:!{arr:1,array:1}.hasOwnProperty(r)||a instanceof Array||(a=[]),d(a)},Util.conf_defaults=function(e,t,n,o){var i;for(i=0;i<o.length;i+=1)Util.conf_default(e,t,n,o[i][0],o[i][1],o[i][2],o[i][3],o[i][4])},Util.objectPrototypeToString=Object.prototype.toString,Util.is_string=function(e){return"[object String]"===Util.objectPrototypeToString.call(e)},Util.is_valid_number=function(e){return Number.isFinite?Number.isFinite(e):isFinite(e)},Util.string_rpad=function(e,t){var n,o;for(n=Math.max(t-e.length,0),o=0;o<n;o+=1)e+=" ";return e},Util.string_shorten=function(e,t,n){return(n=n||"").length>t&&(n=n.substring(0,t)),e.length<=t?e:e.substring(0,t-n.length)+n},Util.fit_string_in_fixed_len_field=function(e,t,n){return Util.string_rpad(Util.string_shorten(e,t,n),t)},Util.getPosition=function(e){var t=0,n=0;if(e.offsetParent)do{t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent}while(e);return{x:t,y:n}},Util.getTopWindowMousePosition=function(e){for(var t,n={x:e.clientX,y:e.clientY},o=e.target;o=(o=(o=o.ownerDocument).defaultView||o.parentWindow).frameElement;)t=o.getBoundingClientRect(),n.x+=t.left,n.y+=t.top;return n},Util.getTopWindowPosition=function(e){for(var t,n={x:0,y:0};e;)t=e.getBoundingClientRect(),n.x+=t.left,n.y+=t.top,e=(e=(e=e.ownerDocument).defaultView||e.parentWindow).frameElement;return n.x+=document.body.scrollLeft+document.documentElement.scrollLeft,n.y+=document.body.scrollTop+document.documentElement.scrollTop,n},Util.getEventPosition=function(e,t,n){var o,i,r,a;return(o=e||window.event).pageX||o.pageY?(i=o.pageX,r=o.pageY):(o.clientX||o.clientY)&&(i=o.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,r=o.clientY+document.body.scrollTop+document.documentElement.scrollTop),void 0===n&&(n=1),{x:(i-(a=Util.getPosition(t)).x)/n,y:(r-a.y)/n}},Util.getScreenWidth=function(){return document.documentElement.clientWidth},Util.getScreenHeight=function(){return document.documentElement.clientHeight},Util.htmlMsg=function(e){return"<!DOCTYPE html><html><body>"+e+"</body></html>"},Util.isSameDomain=function(e,t){var n=Util.parseURL(e).hostname,o=Util.parseURL(t).hostname,i=n.split("."),r=o.split(".");return JSON.stringify(i.slice(-2))===JSON.stringify(r.slice(-2))&&(i.slice(-2)[0].length>3||i.length<3||r.length<3||ONE_LEVEL_TLDS.indexOf(i.slice(-1)[0])>=0||i.slice(-3)[0]===r.slice(-3)[0])},Util.makeSet=function(e){var t,n={};for(t=0;t<e.length;t+=1)n[e[t]]=1;return n},Util.buildQueryStr=function(e){var t,n="";if(e)for(t in e)e.hasOwnProperty(t)&&(n+="&"+t+"="+e[t]);return n};var PREFIX="sv_tab_id:";function Poller(e){var t=this,n=null;if(!e.cond_func)throw new Error("Must specify condition function");if(!e.max_nr_polls)throw new Error("Must specify max number of polls");if(!e.poll_interval_ms)throw new Error("Must specify poll interval");function o(t){void 0===t&&(t=0),t+=1,e.cond_func()?e.success_cb():t>e.max_nr_polls?e.timeout_cb&&e.timeout_cb():n=setTimeout((function(){n=null,o(t)}),e.poll_interval_ms)}t.stop=function(){n&&(clearTimeout(n),n=null)},t.start=function(){t.stop(),o()}}function calculateMovement(e,t){var n;return void 0!==e.movementX?{x:e.movementX,y:e.movementY}:(n=safeview[t]?{x:e.screenX-safeview[t].screenX,y:e.screenY-safeview[t].screenY}:{x:0,y:0},safeview[t]={screenX:e.screenX,screenY:e.screenY},n)}function EventListenerModule(){var e=new Logger("event-listener",{level:"info"}),t=this,n=0;function o(e,t,n,o,i){var r;"function"==typeof e.removeEventListener?(r=BrowserDetect.supportsPassiveEventListeners()?{capture:!!o,passive:!!i}:!!o,e.removeEventListener(t,n,r)):"function"==typeof e.detachEvent?e.detachEvent("on"+t,n):assert(!1,"Cannot remove listener.")}function i(e,t,n,o){function i(e){return e?e.toString():null}try{var r={stacktrace:printStackTrace(e),callback:t,"type-of-arguments":i(n),"value-of-arguments":o.join(", "),exception:i(e)};DEBUG&&safeview.ui_frame.call("showModal","Crash"),reportErrorClientEvent("tc-uncaught-exception",r)}catch(t){try{reportErrorClientEvent("double-fault",{"first-exception":i(e),"second-exception":i(t)})}catch(n){window.triple_fault={"first-exception":i(e),"second-exception":i(t),"third-exception":i(n)}}}}t.addListener=function(e,t,r,a,s){var l,d;void 0===e.sv_evt_reg_map&&(e.sv_evt_reg_map={}),void 0===r.sv_evt_reg_id&&(r.sv_evt_reg_id=n,n+=1),l=t+"-"+r.sv_evt_reg_id.toString(),e.sv_evt_reg_map[l]&&o(e,t,d=e.sv_evt_reg_map[l],a,s),d=function(e){var t,n,o,r=e.toString(),a=[],s=[];function l(e){-1===s.indexOf(e)&&s.push(e)}return function(){try{e.apply(this,arguments)}catch(e){if(!safeview.resync_in_progress){for(r=(r=r.substr("function ".length)).substr(0,r.indexOf("{")),t=Array.prototype.slice.call(arguments),n=t[0];n;)Object.getOwnPropertyNames(n).forEach(l),n=Object.getPrototypeOf(n);for(o=0;o<s.length;o++){n=s[o];try{a.push(n+":"+t[0][n])}catch(e){a.push(n+": "+(e.message||"<inaccessible>"))}}i(e,r,t,a)}}}}(r),e.sv_evt_reg_map[l]=d,function(e,t,n,o,i){var r;"function"==typeof e.addEventListener?(r=BrowserDetect.supportsPassiveEventListeners()?{capture:!!o,passive:!!i}:!!o,e.addEventListener(t,n,r)):"function"==typeof e.attachEvent?e.attachEvent("on"+t,n):assert(!1,"Cannot add listener.")}(e,t,d,a,s)},t.removeListener=function(t,n,i,r,a){var s,l;void 0!==t.sv_evt_reg_map&&void 0!==i.sv_evt_reg_id?(s=n+"-"+i.sv_evt_reg_id.toString(),(l=t.sv_evt_reg_map[s])?(o(t,n,l,r,a),delete t.sv_evt_reg_map[s]):e.error("Callback not found in removeListener")):e.error("Registration id not found in removeListener")},t.setListenersEnabled=function(e,n,o,i){var r=e?t.addListener:t.removeListener;assert(n),assert(i),o.forEach((function(e){r(n,e,i)}))}}Util.getOrSetTabID=function(){var e;return assert(window.localStorage),assert("string"==typeof window.name),__startswith(window.name,PREFIX)?window.name.substr(PREFIX.length):(e=__randstr(16),window.name=PREFIX+e,window.history.replaceState&&window.history.replaceState(window.history.state,document.title,window.location.href),e)},Util.safeCreateWebSocket=function(e,t){var n=null;e=Util.addTrackingLabel(e);try{window.WebSocket?n=new window.WebSocket(e):window.MozWebSocket&&(n=new window.MozWebSocket(e))}catch(n){if(t)throw n;reportClientEvent("tc-websocket-create-failed",{request_url:e})}return n},Util.wsCloseDiags=function(e){return{wasClean:e.wasClean,code:e.code,reason:e.reason}},Util.get_node_tag=function(e){soft_assert(e);var t=e.localName||e.nodeName;return t=t?t.toLowerCase():t},Util.getDoctypeDecl=function(e){var t,n=e.document.doctype;return n?(t="<!DOCTYPE "+n.name,n.publicId?(t+=' PUBLIC "'+n.publicId+'"',n.systemId&&(t+=' "'+n.systemId+'"')):n.systemId&&(t+=' SYSTEM "'+n.systemId+'"'),t+=">"):t="",t},Util.is_element_input_text=function(e){var t=Util.get_node_tag(e);return"textarea"===t||"input"===t&&Util.input_text_types.hasOwnProperty(e.type)},Util.is_frame_node_name=function(e){return"iframe"===e||"frame"===e},Util.is_frame_node=function(e){return Util.is_frame_node_name(e.localName)},Util.is_frame_owner=function(e){return Util.is_frame_node(e)||e.__sv_frame_owner},Util.is_autofill_target=function(e){return"input"===Util.get_node_tag(e)&&Util.is_element_input_text(e)},Util.handle_autofill_event=function(e,t){return Util.is_autofill_target(e)&&("keypress"===t.type||"keydown"===t.type||"keyup"===t.type)&&!("keyCode"in t||"metaKey"in t||"shiftKey"in t||"ctrlKey"in t||"altKey"in t)&&(t.keyCode=0,t.charCode=0,t.key="",t.code="",t.shiftKey=!1,t.ctrlKey=!1,t.metaKey=!1),t},Util.can_element_use_lecho=function(e){var t;return!("input"!==Util.get_node_tag(e)||!e.ownerDocument)&&("number"!==e.__sv_original_input_type&&(!(e.ownerDocument.defaultView||e.ownerDocument.parentWindow).__sv_surrogate_is_readonly&&((t=e.getAttribute("type"))||(t="text"),t=t.toLowerCase(),Util.input_text_types_strict.indexOf(t)>-1)))},Util.is_content_editable=function(e){var t=Util.get_node_tag(e);return(!e.ownerDocument||!(e.ownerDocument.defaultView||e.ownerDocument.parentWindow).__sv_surrogate_is_readonly)&&("textarea"===t||e.isContentEditable||3===e.nodeType&&e.parentNode&&e.parentNode.isContentEditable)},Util.is_node_likely_anchor_tag=function(e){return!!e.getAttribute&&!!e.getAttribute("href")},Util.is_elem_editable=function(e){var t=Util.get_node_tag(e);return(e.isContentEditable||e.ownerDocument&&"on"===e.ownerDocument.designMode)&&"textarea"!==t&&"input"!==t},Util.findPredicateOnBranch=function(e,t){for(var n=e;n;){if(t(n))return n;n=n.parentNode}return null},Util.now=function(){return window.performance?Number(window.performance.now()).toFixed():Date.now()},Util.rewriteRawHref=function(e){return window.TPROXY_ENABLED?e:(safeview.pairing_dict.mpa_id&&!e.startsWith("mpa/")&&(e="mpa/"+(safeview.pairing_dict.mpa_id||"1")+"/"+e),"/"+e)},Util.getCookie=function(e){var t={};if(e)return document.cookie.split(";").forEach((function(e){e=e.trim().split("="),t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])})),t[e]},Util.setCookie=function(e,t,n,o,i,r,a){var s=[encodeURIComponent(e)+"="+encodeURIComponent(t)];return!!e&&(n&&s.push("expires="+n.toUTCString()),o&&s.push("path="+o),i&&s.push("domain="+i),r&&s.push("secure"),a&&!safeview.xbrowser.isBrokenSameSite()&&s.push("samesite="+a),document.cookie=s.join("; "),!0)},Util.forEachItem=function(e,t){var n;for(n in assert("object"==typeof e),assert("function"==typeof t),e)if(e.hasOwnProperty(n)&&t(n,e[n]))return},Util.isDictEmpty=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},Util.dictValues=function(e){var t=[];return Object.values?Object.values(e):(Util.forEachItem(e,(function(e,n){t.push(n)})),t)},Util.copyDict=function(e,t){var n=t||{};return Util.forEachItem(e,(function(e,t){n[e]=t})),n},Util.getImageFromU8Array=function(e,t){var n=new window.Blob([e],{type:"image/*"}),o=new Image;function i(e){assert(o.src),window.URL.revokeObjectURL(o.src),o.onload=o.onerror=null,t(o,e)}assert(t),o.onload=i.curry(!0),o.onerror=i.curry(!1),o.src=window.URL.createObjectURL(n)},Util.getImageFromURL=function(e,t){var n=new Image;function o(e){assert(n.src),n.onload=n.onerror=null,t(n,e)}assert(t),n.onload=o.curry(!0),n.onerror=o.curry(!1),Util.requiresCofRequest(e)?safeview.xbrowser.createBlobSrc(e).catch((function(){return e})).then((function(e){n.src=e})):n.src=e},Util.Uint8ArrayToBase64=function(e){var t,n=[];for(t=0;t<e.length;t+=4096)n.push(String.fromCharCode.apply(null,e.subarray(t,t+4096)));return window.btoa(n.join(""))},Util.elementIntersectsViewport=function(e){var t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth;return!(t.left>=o||t.right<=0||t.top>=n||t.bottom<=0)},Util.elementIsInsideViewport=function(e){var t,n=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth;return!e.getBoundingClientRect||(t=e.getBoundingClientRect()).top>=0&&t.left>=0&&t.bottom<=n&&t.right<=o},Util.isIframeReady=function(e,t){var n=e.contentWindow;return n&&n.document&&"complete"===n.document.readyState&&(!t||n.document.documentElement&&n.document.documentElement.getAttribute("tc-nonce")===t)},Util.IsEventTargetForeign=function(e,t){return assert(e),(!t||"resize"!==t.type&&"copy"!==t.type&&"focus"!==t.type)&&!getUidByNode(e)},Util.calculateMouseMovement=function(e){return calculateMovement(e,"last_mouse_pos")},Util.calculateDragMovement=function(e){return calculateMovement(e,"last_drag_pos")},Util.makePasteDataList=function(e,t,n){var o,i,r,a,s,l,d,c=[],u=[],m=0,p=0,f=!1,g=function(){safeview.allow_backend_dragdrop&&u.length&&(c.push(u),c.push("file_obj_list"))};if(e.clipboardData&&e.clipboardData.getData)for(o=e.clipboardData,r=0;r<o.types.length;r+=1)if("text/plain"===(i=o.types[r])||"text/html"===i||"text/rtf"===i&&!safeview.pairing_dict.mpa_id)c.push(o.getData(i)),c.push(i);else if("Files"===i)for(a=0;a<o.files.length;++a)0===(l=o.files.item(a)).type.indexOf("image")?(m+=1,f=!0,(d=new FileReader).onload=function(){var e=d.result;e&&(c.push(e),c.push(l.type)),++p===m&&(g(),n(c))},d.onerror=function(e){++p===m&&(g(),n(c)),reportWarnClientEvent("tc-image-paste-error",{name:e.name||"none",mime:e.type||"none"})}.curry(l),d.readAsDataURL(l)):u.push(l);else reportWarnClientEvent("tc-paste-error",{reason:"Unsupported type",type:i});else t.clipboardData&&t.clipboardData.getData&&(s=t.clipboardData.getData("Text"))&&(c.push(s),c.push("text/plain"));f||(g(),n(c))},Util.filterPasteDataList=function(e){var t,n=[];for(t=0;t<e.length;t+=2){if("text/plain"===e[t+1]){n[0]=e[t],n[1]=e[t+1];break}"text/html"===e[t+1]&&(n[0]=e[t],n[1]=e[t+1])}for(;e.length>0;)e.pop();2===n.length&&(e.push(n[0]),e.push(n[1]))},Util.copyToClipboardInEventHandler=function(e,t,n){BrowserDetect.isEdge()?e.clipboardData.setData("text",t):e.clipboardData?(e.clipboardData.setData("text/plain",t),n&&e.clipboardData.setData("text/html",n)):window.clipboardData.setData("text",t),e.preventDefault()},Util.MouseAndKeyboardModifiers=Object.freeze({kNone:0,kLeftButtonDown:1,kRightButtonDown:2,kMiddleButtonDown:4,kBackButtonDown:8,kForwardButtonDown:16,kShiftKey:32,kCtrlKey:64,kAltKey:128,kMetaKey:256,kScrollbarScrolled:512,kSetForeground:1024,kWheelDefaultPrevented:2048}),Util.getButtonModifiers=function(e,t){if(void 0!==e.buttons)return e.buttons;switch(e.which){case 0:return Util.MouseAndKeyboardModifiers.kNone;case 1:return Util.MouseAndKeyboardModifiers.kLeftButtonDown;case 2:return Util.MouseAndKeyboardModifiers.kMiddleButtonDown;case 3:return Util.MouseAndKeyboardModifiers.kRightButtonDown;default:return t.error({event:"tc-unknown-button",which:e.which}),0}},Util.getMouseAndKeyboardModifiers=function(e,t){var n=Util.getButtonModifiers(e,t);return assert(void 0!==e.shiftKey),assert(void 0!==e.ctrlKey),assert(void 0!==e.altKey),assert(void 0!==e.metaKey),e.shiftKey&&(n|=Util.MouseAndKeyboardModifiers.kShiftKey),e.ctrlKey&&(n|=Util.MouseAndKeyboardModifiers.kCtrlKey),e.altKey&&(n|=Util.MouseAndKeyboardModifiers.kAltKey),e.metaKey&&(n|=Util.MouseAndKeyboardModifiers.kMetaKey),e.__sv_scrollbar_scrolled&&(n|=Util.MouseAndKeyboardModifiers.kScrollbarScrolled),e.__sv_set_foreground&&(n|=Util.MouseAndKeyboardModifiers.kSetForeground),e.__sv_wheel_default_prevented&&(n|=Util.MouseAndKeyboardModifiers.kWheelDefaultPrevented),n},Util.getRelativeMouseCoords=function(e,t){var n;return(n=(e=3===e.nodeType?e.parentNode:e).getBoundingClientRect()).left>0&&n.top>0&&n.right<window.innerWidth&&n.bottom<window.innerHeight&&(!t.buttons||!e||"canvas"!==e.nodeName.toLowerCase()||"mousemove"!==t.type&&"pointermove"!==t.type)&&"drag"!==t.type&&"dragstart"!==t.type&&"dragend"!==t.type&&"dragover"!==t.type&&"dragenter"!==t.type&&"dragleave"!==t.type&&"drop"!==t.type?{x:t.clientX-n.left,y:t.clientY-n.top,relative_to_target:!0}:{x:t.clientX,y:t.clientY,relative_to_target:!1}},Util.gen_dragdrop_file_list=function(e){var t,n,o,i=[];function r(e){return{name:e.name,type:e.type}}if(e.items&&e.items.length>0)for(t=0;t<e.items.length;t++)"file"===(o=e.items[t]).kind&&(n=o.getAsFile(),i.push(n?r(n):{type:o.type}));else{for(t=0;t<e.files.length;t++)i.push(r(e.files[t]));0===i.length&&(e.types.contains&&e.types.contains("Files")||(e.types.indexOf&&e.types.indexOf("Files"))>=0)&&(i=[{type:"text/plain"}])}return i},Util.debug_print_selection=function(e,t){var n,o,i,r;function a(e){return 1===e.nodeType?"node_type:element_node, node_name:"+e.nodeName+", text_content:"+e.textContent:3===e.nodeType?"node_type:text_node, node_value:"+e.nodeValue:"Unexpected node type in selection, node_type:"+e.nodeType}if(!e.anchorNode||!e.focusNode)return e.anchorNode,void e.focusNode;if("anchorNode={"+a(e.anchorNode)+"}, focusNode={"+a(e.focusNode)+"}, anchorOffset="+e.anchorOffset+", focusOffset="+e.focusOffset+", isCollapsed="+e.isCollapsed+", rangeCount="+e.rangeCount,"startContainer={"+a((n=e.getRangeAt(0)).startContainer)+"}, endContainer={"+a(n.endContainer)+"}, startOffset="+n.startOffset+", endOffset="+n.endOffset,1===(i=e.focusNode).nodeType)for(i.nodeName,o=0;o<i.childNodes.length;o+=1)1===(r=i.childNodes[o]).nodeType?(r.nodeType,r.nodeName,r.textContent):3===r.nodeType&&(r.nodeType,r.nodeValue)},Util.ensureElementPresent=function(e){var t,n=document[e];n||((t=document.getElementsByTagName("html")[0])||(t=document.createElement("html"),document.appendChild(t)),n=document.createElement(e),t.appendChild(n),assert(document[e]))},Util.splunkify=function(e){var t=JSON.stringify(e);return t?t.replace(/\"/g,"'"):t},Util.buildLoginForm=function(e,t){var n,o,i;function r(e,t){var o=document.createElement("input");o.type="hidden",o.name=e,o.value=t,n.appendChild(o)}for((n=document.createElement("form")).action=e.login_url,r("url",t),i=["through","entry_mode","redirect_list","prepend","doc_headers","xheaders","inspect_host","mpa_id","flow_id"],o=0;o<i.length;o++)e[i[o]]&&r(i[o],e[i[o]]);return n},Util.submitLoginForm=function(e,t){t&&(e.target=t),e.method="POST",document.body.appendChild(e),e.submit()},Util.b64Encode=function(e,t){var n,o,i,r,a,s,l,d="",c=0;for(t||(e=Util.utf8Encode(e));c<e.length;)r=(n=e.charCodeAt(c++))>>2,a=(3&n)<<4|(o=e.charCodeAt(c++))>>4,s=(15&o)<<2|(i=e.charCodeAt(c++))>>6,l=63&i,isNaN(o)?s=l=64:isNaN(i)&&(l=64),d=d+Util.b64_chars.charAt(r)+Util.b64_chars.charAt(a)+Util.b64_chars.charAt(s)+Util.b64_chars.charAt(l);return d},Util.utf8Encode=function(e){var t,n,o="";for(e=e.replace(/\r\n/g,"\n"),t=0;t<e.length;t++)(n=e.charCodeAt(t))<128?o+=String.fromCharCode(n):n>127&&n<2048?(o+=String.fromCharCode(n>>6|192),o+=String.fromCharCode(63&n|128)):(o+=String.fromCharCode(n>>12|224),o+=String.fromCharCode(n>>6&63|128),o+=String.fromCharCode(63&n|128));return o},Util.utf8ByteDecode=function(e){var t,n;if(window.TextDecoder)return new TextDecoder("utf-8").decode(e);for(t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return decodeURIComponent(window.escape(t))},Util.is_korean_char=function(e){var t=e.charCodeAt(0);return t>=44032&&t<=55203||t>=4352&&t<=4607||t>=12592&&t<=12687||t>=43360&&t<=43391||t>=55216&&t<=55295},Util.isTabVisible=function(){return"hidden"!==document.visibilityState},Util.showEmbeddedError=function(e,t,n,o){document.getElementsByTagName("sv_error_page").length||(document.body.innerHTML=o.get("error-template")),document.getElementById("error-title").textContent=e,document.getElementById("error-description").textContent=t,document.getElementById("spinner").style.display="none"},Util.showError=function(e,t,n,o){reportWarnClientEvent("tc-main-show-error-page",{title:e,body:t,extra:n}),safeview&&safeview.event_reporter&&safeview.event_reporter.flush(),Util.showEmbeddedError(e,t,n,o)},Util.getDocIdIfSafedocs=function(){return window.location.href.indexOf("/doc/docview/viewer")>-1||window.location.href.indexOf("/cloudview/viewer")>-1||window.location.href.indexOf("viewer.documentisolation:8081")>-1?window.location.href.substring(window.location.href.lastIndexOf("/")+1):null},Util.getQueryValue=function(e,t){var n,o;if(BrowserDetect.isIE()||!window.URLSearchParams){for("?"===e.charAt(0)&&(e=e.substring(1)),n=decodeURIComponent(e).split("&"),o=0;o<n.length;o+=1){if(n[o]===t)return"";if(n[o].startsWith(t+"="))return n[o].substring(t.length+1)}return null}return(n=new window.URLSearchParams(e)).get(t)},Util.addQueryValue=function(e,t,n){var o,i,r,a;if(BrowserDetect.isIE()||!window.URLSearchParams){for(o=e.substring(1).split("&"),r=encodeURIComponent(t)+"="+encodeURIComponent(n),a=0;a<o.length;a+=1)if(""===(i=decodeURIComponent(o[a])))o.splice(a,1);else{if(i===t){o[a]=r;break}if(i.startsWith(t+"=")){o[a]=r;break}}return a>=o.length&&(o[o.length]=r),"?"+o.join("&")}return(o=new window.URLSearchParams(e)).set(t,n),"?"+o.toString()},Util.addQueryValueToLocation=function(e,t,n){var o=e.href,i=e.search,r=e.hash;return!r&&o.endsWith("#")&&(r="#"),r&&(o=o.slice(0,-r.length)),!i&&o.endsWith("?")&&(i="?"),i&&(o=o.slice(0,-i.length)),o+(i=Util.addQueryValue(i,t,n))+r},Util.restoreLocationHint=function(){var e,t=Util.getUrlHint(Util.persistentPolicy());t&&(e=Util.addQueryValueToLocation(window.location,t.key,t.value),window.history.replaceState(window.history.state||{},document.title,e))},Util.xframe_reload=function(e){var t;BrowserDetect.isIE()&&Util.is_in_iframe()?(t=window.location.href,window.location.hash&&(t=Util.appendParam("sv_reload",1)),Util.locationSetHref(window,t)):(Util.restoreLocationHint(),window.location.reload(e))},Util.getIframeHelperURL=function(e,t,n,o){var i=Util.getUrlHint(Util.persistentPolicy()),r=window.location.protocol+"//"+window.location.host+"/safeview-redirect/tc_frame.html?dt="+encodeURIComponent(Util.b64Encode(e))+"&n="+t+"&a="+window.TC_API_VERSION;return r+="&fid="+n,o&&(r+="&turl="+encodeURIComponent(Util.b64Encode(new ParsedURL(o).defrag()))),i&&(r+="&"+i.key+"="+i.value),r},Util.formDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},Util.startsWithAnyOf=function(e,t){var n;for(n=0;n<t.length;n+=1)if(__startswith(e,t[n]))return!0;return!1},Util.getBrowserScrollOffset=function(e,t){var n,o,i=Util.getVisualViewport();return e!==window?(assert(void 0!==e.scrollLeft),{x:e.scrollLeft,y:e.scrollTop}):i?(assert(void 0!==i.pageLeft&&void 0!==i.pageTop),{x:i.pageLeft-i.offsetLeft,y:i.pageTop-i.offsetTop}):BrowserDetect.isMobileSafari()?(n=e.scrollX,o=e.scrollY,{x:(n+=t.x)||0,y:(o+=t.y)||0}):(void 0!==e.pageYOffset?(n=e.pageXOffset,o=e.pageYOffset):(n=e.scrollLeft||e.scrollX,o=e.scrollTop||e.scrollY),{x:n||0,y:o||0})},Util.is_element_date_time_input=function(e){return"input"===Util.get_node_tag(e)&&!!Util.date_time_input_types[e.getAttribute("type")]},Util.is_supported_element_date_time_input=function(e){return Util.is_element_date_time_input(e)&&!!Util.date_time_input_types[e.type]},Util.is_unsupported_element_date_time_input=function(e){return Util.is_element_date_time_input(e)&&"text"===e.type},Util.is_element_color_input=function(e){return"input"===Util.get_node_tag(e)&&"color"===e.getAttribute("type")},Util.is_supported_element_color_input=function(e){return Util.is_element_color_input(e)&&"color"===e.type},Util.is_unsupported_element_color_input=function(e){return Util.is_element_color_input(e)&&"text"===e.type},Util.is_element_range_input=function(e){return"input"===Util.get_node_tag(e)&&"range"===e.getAttribute("type")},Util.is_element_visible=function(e){var t=getComputedStyle(e);return(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&"hidden"!==t.visibility&&"none"!==t.display&&"0"!==t.opacity},Util.get_corresponding_chrome_keycode=function(e,t){if("keypress"!==e.type&&BrowserDetect.isFirefox())switch(t){case 59:return 186;case 61:return 187;case 173:return 189}return t},Util.isPdfViewerDisabled=function(){return!1===navigator.pdfViewerEnabled||navigator.plugins&&0===navigator.plugins.length},Util.array_buffer_to_base64=function(e){return null===e?null:Util.Uint8ArrayToBase64(new Uint8Array(e))},Util.base64_to_uint8_array=function(e){var t,n=window.atob(e),o=new Uint8Array(n.length);for(t=0;t<n.length;++t)o[t]=n.charCodeAt(t);return o},Util.base64_to_array_buffer=function(e){return Util.base64_to_uint8_array(e).buffer},Util.join_array_buffers=function(e){var t,n,o=0,i=0;for(n=0;n<e.length;++n)o+=e[n].byteLength;for(t=new Uint8Array(o),n=0;n<e.length;++n)t.set(new Uint8Array(e[n]),i),i+=e[n].byteLength;return t.buffer},Util.isDataOrCtrlMessage=function(e){return e===MSG_KIND_DATA||e===MSG_KIND_CONTROL},Util.replaceAll=function(e,t,n){return e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),n)},Util.safeFocus=function(e){BrowserDetect.isIE()?(void 0===document.body.__sv_original_pos_style&&(document.body.__sv_original_pos_style=document.body.style.position),document.body.style.position="fixed",e.focus(),setTimeout((function(){void 0!==document.body.__sv_original_pos_style&&(document.body.style.position=document.body.__sv_original_pos_style,delete document.body.__sv_original_pos_style)}),0)):e.focus({preventScroll:!0})},Util.getShadowDomAwareSelection=function(e){for(var t,n,o=e.getSelection();o.anchorNode&&o.anchorNode===o.focusNode&&o.anchorOffset===o.focusOffset&&(o.anchorNode.nodeType===Node.ELEMENT_NODE||o.anchorNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE);){if((t=o.anchorOffset<o.anchorNode.childNodes.length?o.anchorNode.childNodes[o.anchorOffset]:o.anchorNode).nodeType===Node.ELEMENT_NODE)n=t.shadowRoot;else{if(t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE)break;n=t}if(!(n&&n.getSelection&&n.getSelection().anchorNode))break;o=n.getSelection()}return o},Util.getSelectedOptionUids=function(e){var t,n,o=[];for(n=0,t=0;t<e.options.length;t++)e.options[t].selected&&(o[n++]=getUidByNode(e.options[t]));return o},Util.BiMap=function(){var e=this,t={},n={};e.erase=function(e,o){t.hasOwnProperty(e)&&n.hasOwnProperty(o)&&t[e]===o&&n[o]===e&&(delete t[e],delete n[o])},e.set=function(e,o){assert("number"==typeof e||"string"==typeof e),assert("number"==typeof o||"string"==typeof o),t.hasOwnProperty(e)&&t[e]!==o&&delete n[t[e]],n.hasOwnProperty(o)&&n[o]!==e&&delete t[n[o]],t[e]=o,n[o]=e},e.getValByKey=function(e){return t[e]},e.getKeyByVal=function(e){return n[e]},e.viewFromLeft=function(){return __object_assign({},t)},e.viewFromRight=function(){return __object_assign({},n)}},Util.requiresCofRequest=function(e){return!!Util.areAuthTokensInUse()&&(!!e.startsWith("https://")&&(-1===e.indexOf("&k=")||-1===e.indexOf("?k=")||(-1===e.indexOf("&b=")||-1===e.indexOf("?b="))))},Util.same_origin=function(e,t){return Util.origin_of(e)===Util.origin_of(t)};var EventListener=new EventListenerModule;function UX(e,t){var n,o=this,i=new Logger("ux",{level:"info"}),r="safemail-readonly-banner",a="safemail-disable-btn",s="safemail-banner-",l=e.url_builder.buildAssetURL("/safeview-static/images/logo.png"),d={arial:"Arial, Helvetica, sans-serif",georgia:"Georgia, serif",gotham:'Gotham, "Helvetica Neue", Helvetica, Arial, sans-serif',helvetica:'"Helvetica Neue", Helvetica, Arial, sans-serif',lucida:'"Lucida Sans Unicode", "Lucida Grande", sans-serif',tahoma:"Tahoma, Geneva, sans-serif",times:'"Times New Roman", Times, serif',verdana:"Verdana, Geneva, sans-serif"};function c(e,n,o){var r,a,s;function l(e,n){for(var o,i,r=!1,a=e.length;n.firstChild;)n.removeChild(n.firstChild);for(o=0;o<a;o+=1)(i=t.createElement(r?"strong":"span")).textContent=e[o],n.appendChild(i),r=!r}function d(e,n){for(var o;n.firstChild;)n.removeChild(n.firstChild);(o=t.createElement("span")).textContent=e[1],n.appendChild(o)}if(r=t.getElementById("ro-ux-"+e)){for(a in n)n.hasOwnProperty(a)&&((s=t.getElementById("ro-ux-"+e+"-"+a))?n[a].hasOwnProperty("type")?"array"===n[a].type&&n[a].val?s.textContent=n[a].val.join(", "):reportWarnClientEvent("tc-ux-unknown-type",{type:n[a].type}):"phishTarget-short"===e?d(n[a],s):l(n[a],s):i.info({event:"tc-ux-no-placeholder",id:"ro-ux-"+e+"-"+a}));t.getElementById(o).appendChild(r)}else reportWarnClientEvent("tc-ux-no-template",{id:"ro-ux-"+e})}function u(e,t){return function(n,o){var i,r;if(!(o&&t.indexOf(o)<0)){for(r=n.className,i=0;i<t.length;i+=1)r=r.replace(e+t[i],"");r=r.replace(/ {2}/g," "),n.className=r+" "+e+o}}}function m(e,t){e.textContent=t}function p(e){return function(t,n){t.setAttribute(e,n)}}function f(e){return e.replace(/[<>"\/]/gim,"")}function g(e){return e.replace(/[<>"]/gim,"")}function h(e){return __startswith(e,"http://")||__startswith(e,"https://")?encodeURI(e):""}function w(e){return e.match(/^\#[0-9a-fA-F]{3}$/)||e.match(/^\#[0-9a-fA-F]{6}$/)?e:""}function _(e){var t=e.split(";"),n=t[0].split("/");return 2===t.length&&2===n.length&&"data:image"===n[0]&&__startswith(t[1],"base64,")&&["gif","png","jpeg","svg+xml"].indexOf(n[1])>=0?e:""}function y(e){var t,o=e.split("."),i=n;for(t=0;t<o.length;t+=1){if(!i||!i.hasOwnProperty(o[t]))return"";i=i[o[t]]}return i}function v(e,n,o,i){var r=t.getElementById(e),a=y(n);!r||!a&&n||o(r,a=i?i(a):a)}function b(e,n,o){var i;(i=t.getElementById("UX-INLINE-STYLE-SHEET"))||((i=t.createElement("style")).id="UX-INLINE-STYLE-SHEET",t.head.appendChild(i)),i.innerHTML+="."+e+" {"+n+": "+o+" !important;}"}function E(e,t,n,o){var i=y(n);i&&b(e,t,i)}function I(e){return e?"read_only_banner.":"read_write_banner."}function U(e,t){return e&&"read_write"===t?I(e)+"exit_action.read_write.":"direct"===t?I(e)+"exit_action.direct.":I(e)+"exit_action.not_allowed."}o.getIndicatorType=function(e){return(e.content||{}).indicator_type||"regular"},o.customizeBanner=function(e,o,i,l,d,g){var w,B=I(i),D=U(i,l),C=e&&e.explain&&e.explain.length>0&&("coach"===e.experience_mode||"educate"===e.experience_mode),S=g&&g.length>0&&"custom"===e.experience_mode;if(n=o,v(r,"banner_theme",u(s,["white","yellow","red"]),f),v(r,B+"css.banner_type",u(s,["wide","regular"]),f),E("safemail-background","background",B+"css.background_color"),v(r,B+"css.font_family",u("safemail-font-",["arial","georgia","gotham","helvetica","lucida","tahoma","times","verdana"]),f),v("safemail-logo",B+"logo_icon.base64_img",p("src"),_),y(B+"logo_icon.link")&&v("safemail-logo-link",B+"logo_icon.url",p("href"),h),E("safemail-link","color",B+"css.link_color"),v("safemail-main-text",D+"banner_text",m),E("safemail-text","color",B+"css.text_color"),E("safemail-border","border-color",B+"css.border_color"),y(B+"custom_link.show_link")&&y(B+"custom_link.link_url").length>7&&(v("safemail-policy","",u("",["safemail-hidden"]),f),v("safemail-policy-link",B+"custom_link.link_text",m),v("safemail-policy-link",B+"custom_link.link_url",p("href"),h)),d||C?(v(r,B+"css.button_type",u("safemail-",["outline","regular"]),f),d?v(a,D+"button_label",m):t.getElementById(a).textContent="Details",E("safemail-button","color",B+"css.button_text_color"),E("safemail-button","background-color",B+"css.button_background_color"),E("safemail-button","border-color",B+"css.button_border_color")):t.getElementById(a).style.display="none",S)m(t.getElementById("safemail-details-0"),g),b("safemail-details","font-weight","bold"),v("safemail-details","",u("",["safemail-hidden"]));else if(C){for(w=0;w<e.explain.length&&w<3;w+=1)c(e.explain[w].factor_name+"-short",e.explain[w].attributes,"safemail-details-"+w);v("safemail-details","",u("",["safemail-hidden"]))}},o.customizeCoachModeModal=function(e,o,i,r,a){var s;if(n=o,e)for(s=0;s<e.length&&s<3;s+=1)c(e[s].factor_name,e[s].attributes,"coach-mode-modal-body");v("coach-mode-modal","warning_modal_theme",u("",["white","yellow","red"]),f),v("coach-mode-modal-body","warning_modal.modal_text",m),E("coach-mode-text","color","warning_modal.css.text_color"),E("coach-mode-button-1","color","warning_modal.css.button_one_text_color"),E("coach-mode-button-1","background-color","warning_modal.css.button_one_background_color"),E("coach-mode-button-1","border-color","warning_modal.css.button_one_border_color"),v("coach-mode-cancel","warning_modal.css.button_one_type",u("",["outline"]),f),E("coach-mode-button-2","color","warning_modal.css.button_two_text_color"),E("coach-mode-button-2","background-color","warning_modal.css.button_two_background_color"),E("coach-mode-button-2","border-color","warning_modal.css.button_two_border_color"),v("coach-mode-proceed","warning_modal.css.button_two_type",u("",["outline"]),f),y("warning_modal.logo_icon.base64_img")?v("coach-mode-logo","warning_modal.logo_icon.base64_img",p("src"),_):t.getElementById("coach-mode-logo").src=l,y("warning_modal.logo_icon.link")&&v("coach-mode-logo-link","warning_modal.logo_icon.url",p("href"),h),v("coach-mode-modal","warning_modal.css.font_family",u("font-",["arial","georgia","gotham","helvetica","lucida","tahoma","times","verdana"]),f),E("custom-highlight strong","color","warning_modal.css.highlight_color"),i?(t.getElementById("coach-mode-cancel").setAttribute("class","hide"),t.getElementById("coach-mode-proceed").textContent="OK"):v("coach-mode-proceed",U(r,a)+"button_label",m)},o.customizeFeedbackBar=function(e,t,o,i,r,a,s,l,c){var h,I,U;n=e,E(t,"background","css.background_color"),e.css&&e.css.border_color&&(b(t,"border-left",h=w(e.css.border_color)+" 1px solid"),b(t,"border-right",h),b(t,"border-top",h)),E(t,"color","css.text_color"),E(t+" > *","color","css.text_color"),E(t+" > #__safly_feedback_arrow_down.__safly_arrow_down","border-top-color","css.text_color"),(I=y("css.font_family"))&&(U=d[I])&&b(t+" > div","font-family",U),v(r,"logo_icon.base64_img",p("src"),_),v(o,c&&!BrowserDetect.isMobile()?"readonly_indicator.text":"readonly_indicator.iframe_text",m,g),v(o,"readonly_indicator.tooltip",p("data-tooltip"),f),v(i,"bypass_indicator.text",m,f),v(i,"bypass_indicator.tooltip",p("data-tooltip"),f),v(l,"isolate_indicator.tooltip",p("data-tooltip"),f),v(t,"content.indicator_type",u("__safly_",["wide","regular"]),f),v(s,"isolate_indicator.text",m,f),v(a,"custom_link.link_url",p("href"),g),v(a,"custom_link.link_text",m,f)},o.customizeBandwidthBanner=function(e){var t="bandwidth-banner",o="bandwidth-banner-";n=e,v(t,"bandwidth.theme",u(o,["white","yellow","red"]),f),e.bandwidth&&e.bandwidth.content&&!e.bandwidth.content.use_custom_styling||(v(t,"bandwidth.css.banner_type",u(o,["wide","regular"]),f),E("bandwidth-background","background","bandwidth.css.background_color"),v(t,"bandwidth.css.font_family",u("bandwidth-font-",["arial","georgia","gotham","helvetica","lucida","tahoma","times","verdana"]),f),v("bandwidth-logo","bandwidth.logo_icon.base64_img",p("src"),_),E("bandwidth-text","color","bandwidth.css.text_color"),E("bandwidth-border","border-color","bandwidth.css.border_color"),v("bandwidth-banner","bandwidth.css.button_type",u("bandwidth-",["outline"]),f),E("bandwidth-button","color","bandwidth.css.button_text_color"),E("bandwidth-button","background-color","bandwidth.css.button_background_color"),E("bandwidth-button","border-color","bandwidth.css.button_border_color"))},o.customizeBandwidthBannerText=function(e,t){n=e;var o=t?"bandwidth.bandwidth_limit_alert":"bandwidth.bandwidth_usage_alert";v("bandwidth-main-text",o+".text",m),v("bandwidth-disable-btn",o+".label_acknowledgement_text",m)}}function Common(){this.getInterpreterWindow=function(){for(var e=window;e!==window.top&&!e.safeview;)e=e.parent;if(!e.safeview)throw new Error("Trouble finding interpreter window");return e}}function showModal(e){modals[e].show()}function dismissModal(e){var t=modals[e];t&&(t.dismiss(),_top.safeview.ui_frame.hide())}function SafeviewModal(e){var t=this;for(var n in t.hideUIFrameOnFinish=!0,t.closeOnEsc=!0,t.closeOnClickOutside=!1,e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.dismiss=function(e,n){t.visible&&(t.hideUIFrameOnFinish&&!n&&_top.safeview.ui_frame.hide(),t.finishCB&&t.finishCB(e||!1),document.getElementById(t.modalID).close(),t.visible=!1)},t.show=function(){if(!t.visible){if(t.visible=!0,!t.initialized)for(var e in _top.safeview.isChrome()||dialogPolyfill.registerDialog(document.getElementById(t.modalID)),t.initialized=!0,t.btn2Action)t.btn2Action.hasOwnProperty(e)&&(document.getElementById(e).onclick=t.dismiss.bind(this,t.btn2Action[e],!1));document.getElementById(t.modalID).showModal(),handleEscape(document.getElementById(t.modalID),t.closeOnEsc,t.closeOnClickOutside,t.dismiss),t.showCB&&t.showCB(),t.loseFocus&&document.activeElement&&document.activeElement.blur()}}}var _top=(new Common).getInterpreterWindow(),_ux=new UX(_top.safeview,document),reportWarnClientEvent=_top.reportWarnClientEvent,modals={Alert:new SafeviewModal({modalID:"alert-modal",btn2Action:{"alert-escape-button":!1,"alert-ok-button":!1},finishCB:_top.safeview.alert.dismissAlert}),CloudDebugRecordOptions:new SafeviewModal({modalID:"cloud-debug-record-modal",btn2Action:{"cloud-debug-record-ok-button":!0,"cloud-debug-record-cancel-button":!1},finishCB:function(e){if(e){var t=document.querySelector("#cloud-debug-record-modal .radio-option.selected");if(!t)return reportWarnClientEvent("cloud-debug-record-no-option-selected",{}),void _top.safeview.cloud_debug.cancelRecord();var n={complete:["har","net_log"],har:["har"],net_log:["net_log"]}[t.getAttribute("data-value")]||null;null!==n&&_top.safeview.cloud_debug.startRecord(n)}else _top.safeview.cloud_debug.cancelRecord()}}),CloudDebugRecordMessage:new SafeviewModal({modalID:"cloud-debug-record-message-modal",btn2Action:{"cloud-debug-record-message-modal-close":!1}}),CloudDebugRecordError:new SafeviewModal({modalID:"cloud-debug-record-error-modal",btn2Action:{"cloud-debug-record-error-modal-close":!1}}),Coach:new SafeviewModal({modalID:"coach-mode-modal",loseFocus:!0,btn2Action:{"coach-mode-cancel":!1,"coach-mode-proceed":!0},finishCB:function(e){e&&modals.Coach.coach_callback&&modals.Coach.coach_callback()}}),Confirm:new SafeviewModal({modalID:"confirm-modal",btn2Action:{"confirm-ok-button":!0,"confirm-escape-button":!1,"confirm-cancel-button":!1},finishCB:_top.safeview.alert.dismissConfirm}),ConfirmUpload:new SafeviewModal({modalID:"confirm-upload-modal",btn2Action:{"confirm-upload-ok-button":!0,"confirm-upload-cancel-button":!1},finishCB:_top.safeview.upload.dismissConfirmUpload}),ConfirmUploadLocation:new SafeviewModal({modalID:"confirm-upload-location-modal",btn2Action:{"confirm-location-continue-button":!0,"confirm-location-cancel-button":!1},finishCB:function(e){var t=document.querySelector(".toggle-button.active").getAttribute("data-value")||"device";_top.safeview.upload.dismissConfirmUploadLocation(e,t)}}),CopyPaste:new SafeviewModal({modalID:"copy-paste-modal",loseFocus:!0,btn2Action:{"copy-paste-modal-escape":!1,"copy-paste-modal-ok":!1}}),CopyLink:new SafeviewModal({modalID:"copy-link-modal",btn2Action:{"copy-link-modal-escape":!1,"copy-link-modal-ok":!1}}),CopyPasteRestricted:new SafeviewModal({modalID:"copy-paste-policy-modal",loseFocus:!0,btn2Action:{"copy-paste-policy-ok-button":!0}}),Crash:new SafeviewModal({modalID:"crash-modal",btn2Action:{"crash-restart-button":!0},closeOnEsc:!1,loseFocus:!0,finishCB:function(e){e&&_top.location.reload()}}),DLPBlocked:new SafeviewModal({modalID:"dlp-blocked-modal",loseFocus:!0,btn2Action:{"dlp-blocked-ok-button":!0}}),DLPDownloadBlock:new SafeviewModal({modalID:"dlp-block-page-modal",btn2Action:{"dlp-block-close":!0}}),DLPOrNetworkUploadBlocked:new SafeviewModal({modalID:"dlp-or-network-upload-blocked-modal",loseFocus:!0,btn2Action:{"dlp-or-network-upload-blocked-ok-button":!0}}),DLPSoftBlocked:new SafeviewModal({modalID:"dlp-soft-blocked-modal",loseFocus:!0,btn2Action:{"dlp-soft-blocked-ok-button":!0}}),DocviewIframe:new SafeviewModal({modalID:"docview-iframe-modal",loseFocus:!0,btn2Action:{"docview-exit-button":!0},finishCB:function(e){e&&(document.getElementById("docview-content").setAttribute("src",""),_top.safeview.preload_indicator.dismiss(),window.document.body.style.overflow="visible")}}),Download:new SafeviewModal({modalID:"download-modal",loseFocus:!0,btn2Action:{"downloading-cancel-button":"cancel","db-alert-ok-button":!1,"dm-error-ok-button":!1,"download-completed-close-button":!1,"download-completed-open-drive-button":"show-drive","download-continue-button":"continue"},finishCB:function(e){var t;"cancel"===e?_top.safeview.download.cancelDownload(modals.Download.download_id):"show-drive"===e?Util.windowOpen(_top.safeview.url_builder.getServiceDomain()+"/drive/"):"continue"===e&&(t=document.getElementById("save-to-drive").checked,_top.safeview.download.renderDriveDownload(t,modals.Download.download_id))}}),DownloadDisabled:new SafeviewModal({modalID:"download-disabled-modal",loseFocus:!0,btn2Action:{"download-disabled-ok-button":!0}}),ErrorPage:new SafeviewModal({modalID:"error-page-modal",btn2Action:{"error-page-back-button":!0},hideUIFrameOnFinish:!1,finishCB:function(e){e&&(_top.safeview.ui_frame.hide(),_top.history.back())}}),Fullscreen:new SafeviewModal({modalID:"fullscreen-modal",btn2Action:{"fullscreen-allow-button":!0,"fullscreen-deny-button":!1},showCB:function(){_top.safeview.isMobile()?positionCenterMobile(document.getElementById("fullscreen-modal")):positionOverMouse(document.getElementById("fullscreen-modal"))},finishCB:function(e){e?_top.safeview.fullscreen.allowFullscreen():_top.safeview.fullscreen.blockFullscreen()}}),Geolocation:new SafeviewModal({modalID:"geolocation-modal",btn2Action:{"geolocation-accept-button":!0,"geolocation-deny-button":!1}}),Clipboard:new SafeviewModal({modalID:"clipboard-modal",btn2Action:{"clipboard-accept-button":!0,"clipboard-deny-button":!1}}),HttpAuth:new SafeviewModal({modalID:"httpauth-modal",btn2Action:{"httpauth-ok-button":!0,"httpauth-escape-button":!1,"httpauth-cancel-button":!1},acceptElements:["httpauth-ok-button"],dismissElements:["httpauth-escape-button","httpauth-cancel-button"],finishCB:function(e){if(e){var t=navigator.userAgent.indexOf("Firefox")>=0?500:0;setTimeout((function(){_top.safeview.alert.dismissHttpAuthChallenge(!0,document.getElementById("httpauth-username-input").value,document.getElementById("httpauth-password-input").value)}),t)}else _top.safeview.alert.dismissHttpAuthChallenge(!1,"","")}}),InvalidCert:new SafeviewModal({modalID:"invalid-cert-modal",btn2Action:{"invalid-cert-back-button":!1,"invalid-cert-escape-button":!1,"invalid-cert-proceed-button":!0},finishCB:function(e){_top.safeview.alert.dismissInvalidCert(e,invalid_url,cert)}}),Popup:new SafeviewModal({modalID:"popup-modal",closeOnClickOutside:!0,btn2Action:{"popup-escape-button":"cancel","popup-allow-button":"allow","popup-deny-button":"deny"},showCB:function(){var e=document.getElementById(modals.Popup.modalID);modals.Popup.tabinfo.user_initiated?(document.getElementById("popup-indicator").style.display="block",_top.safeview.isMobile()?positionCenterMobile(e):positionOverMouse(e)):(document.getElementById("popup-indicator").style.display="none",positionCenter(e))},finishCB:function(e){if(document.getElementById("popup-body").style.display="none",modals.Popup.tabinfo.new_window_cb)return modals.Popup.tabinfo.new_window_cb(e||"cancel"),void(modals.Popup.tabinfo.new_window_cb=null);_top.safeview.tab.tabOpenAction(modals.Popup.tabinfo,e||"cancel",!0)}}),PrintAlert:new SafeviewModal({modalID:"print-alert-modal",loseFocus:!0,hideUIFrameOnFinish:!1,btn2Action:{"print-alert-button":!0,"print-alert-escape-button":!1},finishCB:function(e){e?modals.PrintOption.show():_top.safeview.ui_frame.hide()}}),PrintOption:new SafeviewModal({modalID:"print-option-modal",btn2Action:{"print-option-button":!0,"print-option-escape-button":!1},finishCB:function(e){e?(_top.safeview.print_handler.setPrintOptions(document.getElementById("print-option-layout").value,document.getElementById("print-option-paper-size").value,document.getElementById("print-option-scale").value,document.getElementById("print-option-header-footer").checked,document.getElementById("print-option-background").checked),_top.safeview.print_handler.handlePrint()):(_top.safeview.print_handler.runDonePrintCb(),_top.safeview.print_handler.setPrintPending(!1))}}),PrintPreview:new SafeviewModal({modalID:"print-preview-modal",loseFocus:!0,btn2Action:{"print-preview-escape-button":!1},finishCB:function(){document.getElementById("print-preview-form").reset(),document.getElementById("print-preview-iframe").src="",_top.safeview.print_handler.runDonePrintCb(),_top.safeview.print_handler.setPrintPending(!1)}}),Prompt:new SafeviewModal({modalID:"prompt-modal",btn2Action:{"prompt-ok-button":!0,"prompt-escape-button":!1,"prompt-cancel-button":!1},finishCB:function(e){e?_top.safeview.alert.dismissPrompt(!0,document.getElementById("prompt-input").value):_top.safeview.alert.dismissPrompt(!1,"")}}),Refresh:new SafeviewModal({modalID:"refresh-modal",btn2Action:{"refresh-restart-button":!0,"refresh-escape-button":!1},closeOnClickOutside:!0,finishCB:function(e){e&&_top.location.reload()}}),SafedocsPrintBlocked:new SafeviewModal({modalID:"safedocs-print-blocked-modal",loseFocus:!0,btn2Action:{"safedocs-print-blocked-ok-button":!1},finishCB:function(){_top.safeview.print_handler.runDonePrintCb(),_top.safeview.print_handler.setPrintPending(!1)}}),SafedocsUsePrintButton:new SafeviewModal({modalID:"safedocs-use-print-button-modal",loseFocus:!0,btn2Action:{"safedocs-use-print-button-ok-button":!1}}),SafedocsPrintPreview:new SafeviewModal({modalID:"safedocs-print-preview-modal",loseFocus:!0,btn2Action:{"safedocs-print-preview-escape-button":!1},finishCB:function(){document.getElementById("safedocs-print-preview-form").reset(),document.getElementById("safedocs-print-preview-iframe").src="",_top.safeview.print_handler.runDonePrintCb(),_top.safeview.print_handler.setPrintPending(!1)}}),TabLimit:new SafeviewModal({modalID:"tab-limit-modal",loseFocus:!0,btn2Action:{"tab-limit-proceed":!1}}),Uploading:new SafeviewModal({modalID:"uploading-modal",loseFocus:!0,btn2Action:{"uploading-abort-button":!1},finishCB:function(e){e||_top.safeview.upload.abortUpload(modals.Uploading.chooser_id)}}),UploadBlocked:new SafeviewModal({modalID:"upload-blocked-modal",loseFocus:!0,btn2Action:{"upload-blocked-ok-button":!0}}),UploadDisabled:new SafeviewModal({modalID:"upload-disabled-modal",loseFocus:!0,btn2Action:{"upload-disabled-ok-button":!0}})};function positionCenterMobile(e){e.style.position="fixed",e.style.top="50%",e.style.left="50%"}function positionCenter(e){var t=e.getBoundingClientRect().width,n=e.getBoundingClientRect().height,o=(window.innerWidth-t)/2+Math.abs(parseInt(getComputedStyle(e)["margin-left"]));e.style.top=Math.max(0,(window.innerHeight-n)/3)+"px",e.style.left=Math.max(0,o)+"px"}function positionOverMouse(e){var t,n=e.getBoundingClientRect().width,o=e.getBoundingClientRect().height,i=_top.safeview.getLastMousePos(),r=Math.abs(parseInt(getComputedStyle(e)["margin-left"])),a=i.y+document.querySelector(".indicator").clientHeight,s=i.x-n/2+r;s=Math.max(r,s),s=Math.min(window.innerWidth-n,s),t=i.x-s+r-document.querySelector(".indicator").clientWidth/2,document.getElementById("popup-indicator").style.left=t+"px",a+o>window.innerHeight?(a=Math.max(document.querySelector(".indicator").clientHeight,i.y-(o+document.querySelector(".indicator").clientHeight)),e.classList.add("bottom"),e.classList.remove("top")):(e.classList.add("top"),e.classList.remove("bottom")),e.style.top=a+"px",e.style.left=s+"px",e.style.position="absolute"}function handleEscape(e,t,n,o){var i,r,a,s,l,d,c,u,m;c=function(e){27===e.keyCode&&(t?o():(e.preventDefault(),e.stopPropagation()))},EventListener.addListener(window,"keydown",c,!0),n&&(l=function(t){r=e.getBoundingClientRect().top,a=e.getBoundingClientRect().height,s=e.getBoundingClientRect().left,u=e.getBoundingClientRect().width,i=r<=t.clientY&&t.clientY<=r+a&&s<=t.clientX&&t.clientX<=s+u,_top.safeview.ui_frame.isMultiDialogOpened()&&document.activeElement&&_top.safeview.ui_frame.findParentDialogModal(document.activeElement).id!==e.id&&(m=!0),!i&&!m&&r!==a!==s!==u!==0&&0<t.clientX&&0<t.clientY&&o()},EventListener.addListener(window,"mousedown",l,!0)),d=function(){EventListener.removeListener(window,"keydown",c,!0),n&&EventListener.removeListener(window,"mousedown",l,!0),EventListener.removeListener(e,"close",d,!1)},EventListener.addListener(e,"close",d,!1)}function onPopupResize(){modals.Popup.tabinfo.user_initiated||positionCenter(document.getElementById("popup-modal"))}function showPopupOpenModal(e){modals.Popup.tabinfo=e,document.getElementById("popup-body").style.display="block","about:blank#blocked"===e.uri_origin||"about:blank"===e.uri_origin||"safedocs"===e.uri_origin?(document.getElementById("popup-message-known-url").style.display="none",document.getElementById("popup-message-unknown-url").style.display="block"):(document.getElementById("popup-message-known-url").style.display="block",document.getElementById("popup-message-unknown-url").style.display="none",document.querySelector(".popup-origin").textContent=e.uri.split("?")[0],document.querySelector(".popup-origin").setAttribute("title",e.uri)),EventListener.addListener(window,"resize",onPopupResize),modals.Popup.show()}function updateUploadProgress(e,t,n){document.getElementById("uploading-filename").textContent=t,document.getElementById("uploading-progress").style.width=n.toString()+"%",modals.Uploading.chooser_id=e,parseInt(n)>=90?"none"===getComputedStyle(document.getElementById("upload-extract-msg")).display&&(document.getElementById("upload-extract-msg").style.display="block",document.getElementById("upload-analysis-spinner").style.display="block",document.getElementById("upload-analysis-spinner-logo").setAttribute("src",_top.safeview.url_builder.buildAssetURL("/safeview-static/img/spinner.gif"))):(document.getElementById("upload-extract-msg").style.display="none",document.getElementById("upload-analysis-spinner").style.display="none"),modals.Uploading.show()}function hideUploadProgress(){modals.Uploading.dismiss(!0),document.getElementById("upload-extract-msg").style.display="none",document.getElementById("upload-analysis-spinner").style.display="none",hideUploadPassword()}function showUploadPassword(e,t){document.getElementById("uploading-encrypted-filename").textContent=t,document.getElementById("uploading-transfer-fid").value=e,document.getElementById("uploading-transfer-fn").value=t,document.getElementById("uploading-transfer-form").setAttribute("target",e),document.getElementById("uploading-transfer-div").style.display="block"}function hideUploadPassword(){document.getElementById("uploading-transfer-div").style.display="none",document.getElementById("uploading-transfer-fid").value="",document.getElementById("uploading-encrypted-filename").textContent=""}function showDownloadPassword(e,t){renderDownloadProgressMessageText(_top.safeview.localization.get("ID_MODAL_DOWNLOAD_PROGRESS_WAITING")),document.getElementById("downloading-encrypted-filename").textContent=t,document.getElementById("downloading-transfer-fid").value=e,document.getElementById("downloading-transfer-fn").value=t,document.getElementById("downloading-transfer-form").setAttribute("target",e),document.getElementById("downloading-transfer-div").style.display="block"}function hideDownloadPassword(){document.getElementById("downloading-transfer-div").style.display="none",document.getElementById("downloading-transfer-fid").value="",document.getElementById("downloading-encrypted-filename").textContent=""}function renderDownloadProgressBar(e){document.getElementById("downloading-progress-bar").style.width=100*e+"%"}function setDownloadHref(e){document.getElementById("download-href").setAttribute("data-href",e)}function hideScanProgress(){modals.DocviewIframe.dismiss(!1,!0),document.getElementById("downloading-modal-progress").style.display="none",document.getElementById("downloading-cancel-button").style.display="none",hideDownloadPassword(),_top.safeview.preload_indicator.dismiss()}function hideDownloadModal(){modals.Download.dismiss(!1,!0)}function showDocviewModal(e){hideScanProgress(),document.getElementById("download-modal-error").style.display="none",document.getElementById("download-href").removeAttribute("data-href"),hideDownloadModal(),document.getElementById("docview-content").setAttribute("src",e),window.document.body.style.overflow="hidden",modals.DocviewIframe.show()}var DownloadHeaderText={Progress:_top.safeview.localization.get("ID_MODAL_DOWNLOAD_PROGRESS_HEADER"),Blocked:_top.safeview.localization.get("ID_MODAL_DOWNLOAD_BLOCKED_HEADER"),Error:_top.safeview.localization.get("ID_MODAL_DOWNLOAD_ERROR_HEADER"),Completed:_top.safeview.localization.get("ID_MODAL_DOWNLOAD_COMPLETED_HEADER")};function renderDownloadProgressHeaderText(e){document.getElementById("downloading-header-text").textContent=e}function buildImageUrl(e){return _top.safeview.url_builder.buildAssetURL("/safeview-static/img/"+e)}function showDownloadBlocked(e,t,n){t&&renderFileName(t),n&&renderFileSize(n),renderDownloadProgressHeaderText(DownloadHeaderText.Blocked),hideScanProgress(),document.getElementById("download-blocked-icon").setAttribute("src",buildImageUrl("icon-exclamation-triangle.png")),document.getElementById("db-block-msg").textContent=e,document.getElementById("download-modal-blocked").style.display="block",document.getElementById("download-modal-error").style.display="none",document.getElementById("downloading-cancel-button").style.display="none",document.getElementById("db-alert-ok-button").style.display="inline-block",document.getElementById("dm-error-ok-button").style.display="none",document.getElementById("download-href").removeAttribute("data-href"),document.getElementById("db-alert-ok-button").setAttribute("autofocus","autofocus"),document.getElementById("dm-error-ok-button").removeAttribute("autofocus"),document.getElementById("download-completed-close-button").style.display="none",document.getElementById("download-completed-open-drive-button").style.display="none",document.getElementById("download-continue-button").style.display="none",document.getElementById("download-modal-save-options").style.display="none",showDownloadModalFooter(!0),modals.Download.show()}function showDownloadError(e,t,n){e||(e=DownloadHeaderText.Error),t||(t=_top.safeview.localization.get("ID_MODAL_DOWNLOAD_ERROR_BODY")),n?(document.getElementById("download-completed-open-drive-button").style.display="inline-flex",document.getElementById("download-completed-close-button").style.display="inline-block",document.getElementById("dm-error-ok-button").style.display="none",document.getElementById("dm-error-ok-button").removeAttribute("autofocus")):(document.getElementById("download-completed-open-drive-button").style.display="none",document.getElementById("download-completed-close-button").style.display="none",document.getElementById("dm-error-ok-button").style.display="inline-block",document.getElementById("dm-error-ok-button").setAttribute("autofocus","autofocus")),renderDownloadProgressHeaderText(e),hideScanProgress(),document.getElementById("download-error-icon").setAttribute("src",buildImageUrl("icon-exclamation-circle.svg")),document.getElementById("download-error-message").textContent=t,document.getElementById("download-modal-blocked").style.display="none",document.getElementById("download-modal-error").style.display="inline-block",document.getElementById("downloading-cancel-button").style.display="none",document.getElementById("db-alert-ok-button").style.display="none",document.getElementById("download-href").removeAttribute("data-href"),document.getElementById("db-alert-ok-button").removeAttribute("autofocus"),document.getElementById("download-continue-button").style.display="none",document.getElementById("download-modal-save-options").style.display="none",showDownloadModalFooter(!0),modals.Download.show()}function renderFileName(e){var t,n,o=e.lastIndexOf(".");-1===o?(t=e,n=""):(t=e.substring(0,o),n=e.substring(o)),t.length>40&&(t=t.substring(0,40)+"..."),document.getElementById("downloading-file-details-name").textContent=t+n}function renderFileSize(e){var t=document.getElementById("downloading-file-details-size");t.textContent=e||""}function renderDownloadProgressMessageText(e,t){var n,o=document.getElementById("download-progress-message-text");o.textContent=e+(t?": ":""),t&&((n=document.createElement("strong")).textContent=t,o.appendChild(n))}function renderDownloadProgressMessageImage(e,t){var n=document.getElementById("download-progress-message-image");e?n.setAttribute("class",e):n.removeAttribute("class"),t?n.setAttribute("src",t):n.removeAttribute("src")}function renderDownloadProgress(e,t,n,o,i){renderDownloadProgressBar(e),renderDownloadProgressMessageText(t,n),renderDownloadProgressMessageImage(o,i)}function updateDownloadProgress(e,t,n,o,i,r,a,s){modals.DocviewIframe.dismiss(!1,!0),modals.Download.download_id=e,renderDownloadProgressHeaderText(DownloadHeaderText.Progress),renderFileName(t),renderFileSize(n),renderDownloadProgress(o,i,r,a,s),hideDownloadPassword(),document.getElementById("download-href").removeAttribute("data-href"),document.getElementById("download-modal-blocked").style.display="none",document.getElementById("download-modal-error").style.display="none",document.getElementById("download-completed-close-button").style.display="none",document.getElementById("download-completed-open-drive-button").style.display="none",document.getElementById("downloading-modal-progress").style.display="block",document.getElementById("downloading-progress-container-div").style.display="block",document.getElementById("download-modal-message-div").style.display="block",document.getElementById("downloading-cancel-button").style.display="inline-block",document.getElementById("db-alert-ok-button").style.display="none",document.getElementById("dm-error-ok-button").style.display="none",document.getElementById("db-alert-ok-button").removeAttribute("autofocus"),document.getElementById("dm-error-ok-button").removeAttribute("autofocus"),document.getElementById("download-continue-button").style.display="none",document.getElementById("download-modal-save-options").style.display="none",showDownloadModalFooter(!0),modals.Download.show()}function renderDownloadToDriveProgress(e,t){modals.DocviewIframe.dismiss(!1,!0),renderDownloadProgressHeaderText(DownloadHeaderText.Progress),renderFileName(e),renderFileSize(t),renderDownloadProgressMessageText(_top.safeview.localization.get("ID_MODAL_DOWNLOADING_TO_DRIVE"),void 0),renderDownloadProgressMessageImage(void 0,_top.safeview.url_builder.buildAssetURL("/safeview-static/img/spinner.gif")),hideDownloadPassword(),document.getElementById("download-href").removeAttribute("data-href"),document.getElementById("download-modal-blocked").style.display="none",document.getElementById("download-modal-error").style.display="none",document.getElementById("downloading-modal-progress").style.display="block",document.getElementById("download-modal-message-div").style.display="block",document.getElementById("downloading-cancel-button").style.display="inline-block",document.getElementById("downloading-progress-container-div").style.display="none",document.getElementById("download-modal-save-options").style.display="none",showDownloadModalFooter(!1),modals.Download.show()}function showDownloadModalFooter(e){e?(document.getElementById("download-modal-footer").style.display="block",document.getElementById("download-modal-footer-gap").style.display="none"):(document.getElementById("download-modal-footer").style.display="none",document.getElementById("download-modal-footer-gap").style.display="block")}function renderDownloadCompleted(e,t){modals.DocviewIframe.dismiss(!1,!0),renderDownloadProgressHeaderText(DownloadHeaderText.Completed),renderFileName(e),renderFileSize(t),renderDownloadProgressMessageText(_top.safeview.localization.get("ID_MODAL_DOWNLOAD_COMPLETED_FILE_SAVED_TO_CLOUD_DRIVE"),void 0),renderDownloadProgressMessageImage(void 0,_top.safeview.url_builder.buildAssetURL("/safeview-static/img/icon-check.png")),document.getElementById("downloading-modal-progress").style.display="block",showDownloadModalFooter(!0),document.getElementById("download-completed-close-button").style.display="inline-block",document.getElementById("download-completed-open-drive-button").style.display="inline-flex",document.getElementById("downloading-progress-container-div").style.display="none",document.getElementById("db-alert-ok-button").style.display="none",document.getElementById("dm-error-ok-button").style.display="none",document.getElementById("db-alert-ok-button").removeAttribute("autofocus"),document.getElementById("dm-error-ok-button").removeAttribute("autofocus"),document.getElementById("downloading-cancel-button").style.display="none",document.getElementById("download-continue-button").style.display="none",document.getElementById("download-modal-save-options").style.display="none",modals.Download.show()}function renderDownloadSaveOptions(e,t){modals.DocviewIframe.dismiss(!1,!0),renderDownloadProgressHeaderText(DownloadHeaderText.Progress),renderFileName(e),renderFileSize(t),hideScanProgress(),showDownloadModalFooter(!0),document.getElementById("download-continue-button").style.display="inline-block",document.getElementById("downloading-cancel-button").style.display="inline-block",document.getElementById("download-modal-save-options").style.display="block",document.getElementById("downloading-progress-container-div").style.display="none",document.getElementById("download-modal-message-div").style.display="none",document.getElementById("db-alert-ok-button").style.display="none",document.getElementById("dm-error-ok-button").style.display="none",document.getElementById("db-alert-ok-button").removeAttribute("autofocus"),document.getElementById("dm-error-ok-button").removeAttribute("autofocus"),modals.Download.show()}function showAlert(e,t){document.getElementById("alert-header-text").textContent=t,document.getElementById("alert-message").textContent=e,modals.Alert.show()}function showConfirm(e,t){document.getElementById("confirm-header-text").textContent=t,document.getElementById("confirm-message").textContent=e,modals.Confirm.show()}function showCopyPasteRestricted(e,t){var n,o;switch(assert(!Number.isInteger||Number.isInteger(e)),e){case _top.safeview.copy_paste_ctrl.msgbox_types.COPY_DISABLED:o=_top.safeview.localization.get("ID_MODAL_COPY_PASTE_POLICY_HEADING_1"),n=_top.safeview.localization.get("ID_MODAL_COPY_PASTE_POLICY_BLOCK_COPY");break;case _top.safeview.copy_paste_ctrl.msgbox_types.PASTE_DISABLED:o=_top.safeview.localization.get("ID_MODAL_COPY_PASTE_POLICY_HEADING_2"),n=_top.safeview.localization.get("ID_MODAL_COPY_PASTE_POLICY_BLOCK_PASTE");break;case _top.safeview.copy_paste_ctrl.msgbox_types.PASTE_RESTRICTED:assert(!Number.isInteger||Number.isInteger(t)),o=_top.safeview.localization.get("ID_MODAL_COPY_PASTE_POLICY_HEADING_3"),n=(n=_top.safeview.localization.get("ID_MODAL_COPY_PASTE_POLICY_RESTRICT_PASTE")).replace("_x_",t);break;case _top.safeview.copy_paste_ctrl.msgbox_types.COPY_PASTE_DISABLED:o=_top.safeview.localization.get("ID_MODAL_COPY_PASTE_POLICY_HEADING_4"),n=_top.safeview.localization.get("ID_MODAL_COPY_PASTE_POLICY_BLOCK_BOTH");break;default:assert(!1)}document.getElementById("copy-paste-policy-body-text").textContent=n,document.getElementById("copy-paste-policy-heading").textContent=o,modals.CopyPasteRestricted.show()}function permissionAllowReject(e,t,n){modals[n]&&(modals[n].finishCB=e,document.getElementById(n.toLowerCase()+"-message").textContent=t,modals[n].show())}function showPrompt(e,t,n,o){document.getElementById("prompt-header-text").textContent=t,document.getElementById("prompt-message").textContent=e,document.getElementById("prompt-input").value=n,o?(document.getElementById("prompt-input").setAttribute("disabled",!0),document.getElementById("prompt-ok-button").style.display="none"):(document.getElementById("prompt-input").removeAttribute("disabled"),document.getElementById("prompt-ok-button").style.display="inline-block"),modals.Prompt.show(),document.getElementById("prompt-input").select()}function showHttpAuthChallenge(e,t,n){var o=document.getElementById("httpauth-warning"),i=document.getElementById("httpauth-ok-button"),r=document.getElementById("httpauth-username-input"),a=document.getElementById("httpauth-password-input");document.getElementById("httpauth-message").textContent=e,t?(o.textContent=t,o.style.display=""):o.style.display="none",r.value="",a.value="",n?(r.setAttribute("disabled",!0),a.setAttribute("disabled",!0),i.style.display="none"):(r.removeAttribute("disabled"),a.removeAttribute("disabled"),i.style.display=""),modals.HttpAuth.show(),document.getElementById("httpauth-username-input").select()}var cert=null,invalid_url=null;function showInvalidCert(e,t,n,o,i){cert=n,invalid_url=e,i||(document.getElementById("invalid-cert-proceed-button").style.display="none"),document.getElementById("invalid-cert-header-text").textContent=e,document.getElementById("invalid-cert-message").textContent=t,document.getElementById("invalid-cert-details").textContent=o,modals.InvalidCert.show()}function showErrorPage(e,t,n){var o,i;document.getElementById("error-page-title").textContent=e,document.getElementById("error-page-message").textContent=t,n?document.getElementById("error-page-details").textContent=n:((o=document.getElementById("error-page-details")).parentElement.removeChild(o),(i=document.getElementById("error-page-footer")).parentElement.removeChild(i),delete modals.ErrorPage.btn2Action["error-page-back-button"]),modals.ErrorPage.show()}function showTabLimit(e){document.getElementById("tab-limit-proceed").style.display=e?"":"none",modals.TabLimit.show()}function showCoachModeModal(e,t,n,o,i){modals.Coach.coach_callback=n,_ux.customizeCoachModeModal(e,t,!n,o,i),modals.Coach.show()}function showCopyPasteModal(e){var t,n;if(e)for(n=document.querySelectorAll(".menlo-key"),t=0;t<n.length;t++)n[t].textContent="";modals.CopyPaste.show()}function showCopyLinkModal(e){var t=document.getElementById("copy-link-text");t.value=e.link,modals.CopyLink.show(),t.selectionStart=0,t.selectionEnd=t.value.length}function showPrintOptions(){var e=_top.safeview.print_handler.getPrintOptions();document.getElementById("print-option-layout").value=e.layout,document.getElementById("print-option-paper-size").value=e.paper_size,document.getElementById("print-option-scale").value=e.scale,document.getElementById("print-option-header-footer").checked=e.header_footer,document.getElementById("print-option-background").checked=e.background,modals.PrintOption.show()}function showPrintAlert(e,t){document.getElementById("print-alert-header-text").textContent=t,document.getElementById("print-alert-message").textContent=e,modals.PrintAlert.show()}function dismissPrintAlert(){modals.PrintAlert.dismiss(!1)}function showPrintPreview(e,t){document.getElementById("print-preview-form").action=e,document.getElementById("print-preview-layout").value=t.layout,document.getElementById("print-preview-paper-size").value=t.paper_size,document.getElementById("print-preview-scale").value=t.scale,document.getElementById("print-preview-header-footer").value=t.header_footer,document.getElementById("print-preview-background").value=t.background,document.getElementById("print-preview-fid").value=t.fid,document.getElementById("print-preview-safe-rid").value=t.safe_rid,document.getElementById("print-preview-tab-id").value=t.tab_id,modals.PrintPreview.show();var n,o,i,r,a,s,l=_top.safeview.url_builder.buildAssetURL("/safeview-static/css/loader.css"),d=getIFrameDocument(document.getElementById("print-preview-iframe"));_top.safeview.print_handler.shouldDownloadPdf()?(n=_top.safeview.localization.get("ID_PRINT_DOWNLOAD_STATUS"),o=_top.safeview.localization.get("ID_PRINT_DOWNLOAD_HELP")):(n=_top.safeview.localization.get("ID_PRINT_PREVIEW_STATUS"),o=_top.safeview.localization.get("ID_PRINT_PREVIEW_HELP")),assert(d),(i=d.createElement("div")).setAttribute("class","menlo-loader-spinner"),(r=d.createElement("link")).setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),r.setAttribute("href",l),r.setAttribute("media","all"),(a=d.createElement("p")).appendChild(d.createTextNode(n)),(s=d.createElement("p")).appendChild(d.createTextNode(o)),d.body.appendChild(d.createElement("br")),d.body.appendChild(a),d.body.appendChild(s),d.body.appendChild(r),d.body.appendChild(i),submitPrintOptions()}function hidePrintPreview(){modals.PrintPreview.dismiss()}function onPreviewError(){var e,t,n,o=getIFrameDocument(document.getElementById("print-preview-iframe"));assert(o),e=o.createElement("br"),t=o.createElement("p"),n=_top.safeview.print_handler.shouldDownloadPdf()?_top.safeview.localization.get("ID_PRINT_DOWNLOAD_ERROR"):_top.safeview.localization.get("ID_PRINT_PREVIEW_ERROR"),t.appendChild(o.createTextNode(n)),o.body.appendChild(e),o.body.appendChild(t)}function submitPrintOptions(){var e,t,n=document.getElementById("print-preview-form"),o=n.getAttribute("action"),i=n.getAttribute("method"),r=n.getElementsByTagName("input"),a=[];for(t=0;t<r.length;++t)a.push(encodeURIComponent(r[t].name)+"="+encodeURIComponent(r[t].value));e=a.join("&").replace(/%20/g,"+"),_top.safeview.print_handler.fetchPdfForPreview(i,o,e)}function showSafedocsPrintPreview(e,t){document.getElementById("safedocs-print-preview-form").action=e,document.getElementById("safedocs-print-preview-cid").value=t.cid,document.getElementById("safedocs-print-preview-cl").value=t.cluster_id,window.location.hash="#safedocs-print-preview-modal",modals.SafedocsPrintPreview.show();var n=setInterval((function(){var e=document.getElementById("safedocs-print-preview-iframe");e=e.contentWindow||e.contentDocument,null!==e.document.getElementById("safedocs-print-preview-status")?(i(),r()):clearInterval(n)}),3e4),o=navigator.userAgent.indexOf("Firefox")>0||navigator.userAgent.indexOf("Safari")>0;function i(){var e='<br><div id="safedocs-print-preview-status"><p>'+_top.safeview.localization.get("ID_PRINT_PREVIEW_STATUS")+"</p><p>"+_top.safeview.localization.get("ID_PRINT_PREVIEW_HELP")+"</p></div>"+('<link type="text/css" rel="stylesheet" href = "'+_top.safeview.url_builder.buildAssetURL("/safeview-static/css/loader.css")+'" media="all">')+'<div class="menlo-loader-spinner"></div>',t=document.getElementById("safedocs-print-preview-iframe");t=t.contentWindow||t.contentDocument,o?(t.document.open(),t.document.write(e),t.document.close()):t.document.write(e)}function r(){document.getElementById("safedocs-print-preview-form").submit()}i(),r(),window.onhashchange=function(){"#safedocs-print-preview-modal"!==window.location.hash&&modals.SafedocsPrintPreview.hide()},window.onpopstate=function(){"#safedocs-print-preview-modal"===window.location.hash&&modals.SafedocsPrintPreview.hide()}}function getIFrameDocument(e){var t=e.contentWindow||e.contentDocument;return t.document||t}function ignorePrintKeyEvent(e){e.defaultPrevented||(e.metaKey||e.ctrlKey)&&80===e.keyCode&&e.preventDefault()}function showDownloadDlpBlockPage(e){document.getElementById("sv_dlp_block").src=e,showModal("DLPDownloadBlock")}function init(){function e(e){13===e.keyCode&&modals.HttpAuth.dismiss(!0)}document.getElementById("uploading-transfer-button").onclick=function(e){e.preventDefault(),document.getElementById("uploading-transfer-fh").value=_top.safeview.url_builder.getDomain("cluster"),document.getElementById("uploading-transfer-nid").value=_top.safeview.pairing_dict.s_nid,document.getElementById("uploading-transfer-form").setAttribute("action",_top.safeview.url_builder.buildVanityFileTransferURL("/file_transfer")),document.getElementById("uploading-transfer-form").submit()},document.getElementById("downloading-transfer-button").onclick=function(e){var t=document.getElementById("downloading-transfer-fid").value;e.preventDefault(),navigator.userAgent.indexOf("MSIE 10.0")>=0||navigator.userAgent.indexOf("Trident")>=0?Util.windowOpen(_top.safeview.url_builder.buildVanityFileTransferURL("/file_transfer")+"?file_id="+t+"&f_host="+_top.safeview.url_builder.getDomain("cluster")+"&node_id="+_top.safeview.pairing_dict.s_nid,t):(document.getElementById("downloading-transfer-fh").value=_top.safeview.url_builder.getDomain("cluster"),document.getElementById("downloading-transfer-nid").value=_top.safeview.pairing_dict.s_nid,document.getElementById("downloading-transfer-form").setAttribute("action",_top.safeview.url_builder.buildVanityFileTransferURL("/file_transfer")+"?"+t),document.getElementById("downloading-transfer-form").submit())},EventListener.addListener(document.getElementById("prompt-input"),"keypress",(function(e){13===e.keyCode&&modals.Prompt.dismiss(!0)})),EventListener.addListener(document.getElementById("httpauth-username-input"),"keypress",e),EventListener.addListener(document.getElementById("httpauth-password-input"),"keypress",e),EventListener.addListener(document.getElementById("print-option-modal"),"keydown",ignorePrintKeyEvent),EventListener.addListener(document.getElementById("print-preview-modal"),"keydown",ignorePrintKeyEvent),EventListener.addListener(document.getElementById("safedocs-print-preview-modal"),"keydown",ignorePrintKeyEvent),EventListener.addListener(document.getElementById("print-preview-modal"),"close",_top.safeview.print_handler.cleanUpPrint),window.is_frame_loaded=!0,_top.safeview.print_handler.shouldDownloadPdf()&&(document.getElementById("print-option-button").textContent=_top.safeview.localization.get("ID_PRINT_OPTION_DOWNLOAD_BUTTON"),document.getElementById("print-preview-title").textContent=_top.safeview.localization.get("ID_PRINT_DOWNLOAD_TITLE")),_top.safeview.isMobile()&&(document.getElementById("print-alert-footer").style.display="block",document.getElementById("print-alert-modal").style.top="25%");var t=document.getElementById("confirm_upload_drive"),n=document.getElementById("confirm_upload_local");EventListener.addListener(t,"click",(function(){n.classList.remove("active"),t.classList.add("active")})),EventListener.addListener(n,"click",(function(){t.classList.remove("active"),n.classList.add("active")}));var o=document.querySelector(".single-panel-accordian .toggle"),i=document.querySelector(".single-panel-accordian .content");o&&i&&EventListener.addListener(o,"click",(function(){var e="true"===o.getAttribute("aria-expanded");o.setAttribute("aria-expanded",!e),o.classList.toggle("expanded"),i.classList.toggle("hidden")}));var r,a,s=document.querySelectorAll(".radio-option");for(r=0;r<s.length;r++)"true"===s[r].getAttribute("aria-checked")&&s[r].classList.add("selected");for(r=0;r<s.length;r++)EventListener.addListener(s[r],"click",(function(e){var t=e.target.closest(".radio-option"),n=t.closest(".radio-group-container");if(n){var o=n.querySelectorAll(".radio-option");for(a=0;a<o.length;a++)o[a].classList.remove("selected"),o[a].setAttribute("aria-checked","false"),o[a].setAttribute("tabindex","-1");t.setAttribute("tabindex","0")}t.classList.toggle("selected"),t.setAttribute("aria-checked",t.classList.contains("selected")?"true":"false")}))}init();
//# sourceMappingURL=ui-min.js.map